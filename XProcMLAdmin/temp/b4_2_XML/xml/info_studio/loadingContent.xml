<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="loadingContent.css" type="text/css" charset="UTF-8"?>
<XML>
<TITLE> </TITLE><Heading-1>
<A ID="pgfId-1062302"></A>
<A ID="80580"></A>
Creating and Configuring Flows</Heading-1>
<pagenum>
<A ID="pgfId-1062787"></A>
44</pagenum>
<Body>
<A ID="pgfId-1062303"></A>
This chapter describes how to use Information Studio to create flows that load content into a database.</Body>
<Body>
<A ID="pgfId-1064735"></A>
The main topics are:</Body>
<Body-bullet>
<A ID="pgfId-1064746"></A>
<A href="loadingContent.xml#id(56463)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Information Studio section of the Application Services Page</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1069883"></A>
<A href="loadingContent.xml#id(95867)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Creating a New Flow</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064760"></A>
<A href="loadingContent.xml#id(45125)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Collect</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064804"></A>
<A href="loadingContent.xml#id(15084)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Transform</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064826"></A>
<A href="loadingContent.xml#id(67098)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Load</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1066934"></A>
<A href="loadingContent.xml#id(28595)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Launching Ingestion and Tracking Status</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1069735"></A>
<A href="loadingContent.xml#id(32404)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Deleting a Flow</Hyperlink>
</A></Body-bullet>
<Heading-2>
<A ID="pgfId-1069788"></A>
<A ID="56463"></A>
Information Studio section of the Application Services Page</Heading-2>
<Body>
<A ID="pgfId-1070433"></A>
When you start Application Services, the Application Services page opens. At the bottom of the Application Services page is the Information Studio section.</Body>
<Body-indent>
<A ID="pgfId-1070438"></A>
<IMAGE xml:link="simple" href="images/doc-info-studio-home.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1070439"></A>
The Information Studio section lists all of the flows in the <code>
App-Services</code>
 database and allows you to create a new flow, modify an existing flow, or delete a flow. You can click the flow name to modify an existing flow.</Body>
<Body>
<A ID="pgfId-1069819"></A>
The following table lists the actions on the Information Studio Flows section of the Application Services page:</Body>
<TableAnchor>
<A ID="pgfId-1069844"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1069822"></A>
Action</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1069824"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069826"></A>
New Flow</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069828"></A>
Creates a new flow, as described in <A href="loadingContent.xml#id(95867)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Creating a New Flow' on page&#160;21</A>.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069837"></A>
Edit</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069839"></A>
Click on the flow name to configure an existing flow.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069841"></A>
Delete</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069843"></A>
Permanently delete a flow from the <code>
App-Services </code>
database, as described in <A href="loadingContent.xml#id(32404)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Deleting a Flow' on page&#160;44</A>.</CellBody>
</CELL>
</ROW>
</TABLE>
<Heading-2>
<A ID="pgfId-1063359"></A>
<A ID="95867"></A>
Creating a New Flow</Heading-2>
<Body>
<A ID="pgfId-1063382"></A>
This section describes how to create a new flow. </Body>
<Number1>
<A ID="pgfId-1066193"></A>
To create a new flow, click New Flow in the Information Studio section of the Application Services window:</Number1>
<Body-indent>
<A ID="pgfId-1066196"></A>
<IMAGE xml:link="simple" href="images/doc-flow-add.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1066197"></A>
In the Flow Editor window, name the flow by clicking Edit next to the flow name: </Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1063370"></A>
<IMAGE xml:link="simple" href="images/doc-naming-flow.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1063401"></A>
Enter the name of the flow in the text field and click Done:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1063415"></A>
<IMAGE xml:link="simple" href="images/doc-naming-flow2.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-2>
<A ID="pgfId-1066321"></A>
<A ID="45125"></A>
Collect</Heading-2>
<Body>
<A ID="pgfId-1066335"></A>
Collectors allow you to specify how the files are to be loaded into the database. The topics in this section are as follows:</Body>
<Body-bullet>
<A ID="pgfId-1066835"></A>
<A href="loadingContent.xml#id(83469)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Selecting a Collector</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1066853"></A>
<A href="loadingContent.xml#id(68167)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Using the Filesystem Directory Collector</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1066875"></A>
<A href="loadingContent.xml#id(75445)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Using the Browser Drop-Box Collector</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1066897"></A>
<A href="loadingContent.xml#id(11451)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Configuring Ingestion Options</Hyperlink>
</A></Body-bullet>
<Heading-3>
<A ID="pgfId-1066575"></A>
<A ID="83469"></A>
Selecting a Collector</Heading-3>
<Body>
<A ID="pgfId-1067883"></A>
A collector is a plugin component that accumulates content to be loaded into a MarkLogic Server database. Specific collector implementations gather content in different ways. For example, one collector may scan and load files from a filesystem directory in a single pass while another may be configured to monitor and mirror a directory.</Body>
<Body>
<A ID="pgfId-1066975"></A>
Two collectors are shipped with MarkLogic Server:</Body>
<Body-bullet>
<A ID="pgfId-1066996"></A>
Filesystem Directory -- Load all of the files from a specified directory</Body-bullet>
<Body-bullet>
<A ID="pgfId-1067003"></A>
Browser Drop-Box -- Load all of the files dropped into a browser window</Body-bullet>
<Body>
<A ID="pgfId-1067029"></A>
How to use each of these collectors is described below. You can also create custom collectors, as described in <A href="collectors.xml#id(74246)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Creating Custom Collectors' on page&#160;39</A>.</Body>
<Number1>
<A ID="pgfId-1066576"></A>
By default, the Filesystem Directory collector is set. You can change your collector by clicking Change Collector at the bottom of the Collect section of your flow:</Number1>
<Body-indent>
<A ID="pgfId-1066580"></A>
<IMAGE xml:link="simple" href="images/doc-collector-changing.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1066581"></A>
Select the type of collector you want to use:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1066585"></A>
<IMAGE xml:link="simple" href="images/doc-collector-options.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-3>
<A ID="pgfId-1063611"></A>
<A ID="68167"></A>
Using the Filesystem Directory Collector</Heading-3>
<Body>
<A ID="pgfId-1067085"></A>
The Filesystem Directory collector allows you to load all of the files from a specified directory into the database. The Collector Options specify where the ingested documents are to be found in the filesystem. The Ingestion Options specify the manner in which the documents are to be ingested into the database, as described in <A href="loadingContent.xml#id(11451)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Configuring Ingestion Options' on page&#160;26</A>.</Body>
<Number1>
<A ID="pgfId-1065312"></A>
To configure the Collector Options, select Configure in the Collect box:</Number1>
<Body-indent>
<A ID="pgfId-1063616"></A>
<IMAGE xml:link="simple" href="images/doc-collector-setup1.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1063617"></A>
Enter a Directory Path to specify the location of the documents in the filesystem to be ingested into the database. All of the files in the specified directory and its subdirectories will be ingested. When finished, click Done:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1063621"></A>
<IMAGE xml:link="simple" href="images/doc-collector-setup2.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-3>
<A ID="pgfId-1066652"></A>
<A ID="75445"></A>
Using the Browser Drop-Box Collector</Heading-3>
<Body>
<A ID="pgfId-1067810"></A>
The Browser Drop-Box collector allows you to load all of the files dropped into a browser window into the database. The Ingestion Options specify the manner in which the documents are to be ingested into the database, as described in <A href="loadingContent.xml#id(11451)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Configuring Ingestion Options' on page&#160;26</A>.</Body>
<Number1>
<A ID="pgfId-1067817"></A>
To begin loading files into the database, click the Start Loading button:</Number1>
<Body-indent>
<A ID="pgfId-1067821"></A>
<IMAGE xml:link="simple" href="images/doc-browser-load1.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1066710"></A>
Initially, you will be prompted to log into MarkLogic Server and accept a certificate: Enter the same login credentials as you used to log in to Information Studio.</Number>
</NumberList>
<Note>
<A ID="pgfId-1070681"></A>
If you are running MarkLogic Server on Mac OS, do not check the box that instructs Java to remember your login information if you want the option to use the Drop-Box Collector with different credentials.</Note>
<Body-indent>
<A ID="pgfId-1066717"></A>
<IMAGE xml:link="simple" href="images/doc-browser-load2.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1066724"></A>
When accepting the certificate from MarkLogic Server, click 'Always trust content from this publisher' if you don't want to be prompted again to accept the certificate when doing future uploads. Click Run:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1066731"></A>
<IMAGE xml:link="simple" href="images/doc-browser-load3.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1066738"></A>
When you are ready to upload your files, select the files from your filesystem (for example, from an Explorer window) and drag them into the Drag Files Here area of the Collector:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1068345"></A>
<IMAGE xml:link="simple" href="images/doc-browser-load4.gif" show="embed" actuate="auto"/>
</Body-indent>
<Note>
<A ID="pgfId-1068346"></A>
Navigating away from the Information Studio page while uploading will cancel the upload operation.</Note>
<NumberList>
<Number>
<A ID="pgfId-1068354"></A>
When you have finished uploading your files, click the Stop Loading button:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1066790"></A>
<IMAGE xml:link="simple" href="images/doc-browser-load5.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-3>
<A ID="pgfId-1063422"></A>
<A ID="11451"></A>
Configuring Ingestion Options</Heading-3>
<Body>
<A ID="pgfId-1063515"></A>
The Ingestion Options specify the manner in which the documents are to be ingested into the database and under what URI they are to be stored. Here, you can fine-tune which documents are ingested from the Directory Path specified in your Collector Options by document format, encoding type, language, namespace, and a regular expression.</Body>
<Number1>
<A ID="pgfId-1065272"></A>
To configure the Ingestion Options, select Ingestion in the Collect box:</Number1>
<Body-indent>
<A ID="pgfId-1063429"></A>
<IMAGE xml:link="simple" href="images/doc-ingestion-setup1.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1063454"></A>
Configure the fields in the Ingestion Configuration window, as described in the table below. </Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1065621"></A>
<IMAGE xml:link="simple" href="images/doc-ingestion-setup2.gif" show="embed" actuate="auto"/>
</Body-indent>
<Note>
<A ID="pgfId-1065790"></A>
Most of the options in the following table are the same as the options passed to the <code>
xdmp:document-load</code>
 function.</Note>
<TableAnchor>
<A ID="pgfId-1065639"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1064539"></A>
Field</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1064541"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1064543"></A>
Documents per transaction</Body>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1064545"></A>
The maximum number of documents to be ingested in a single transaction. If ingesting more than the maximum, the ingest operation will be scheduled as more than one transaction.</Body>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1068446"></A>
Filtering</Body>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1068448"></A>
The filter used to select the documents in the filesystem. This can be any XQuery regular expression. The default regular expression specifies all documents in the directory and subdirectories.</Body>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1068454"></A>
Repair XML documents</Body>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1068456"></A>
Check this box to attempt to repair malformed XML content on each document during ingestion. If the box is left unchecked, malformed XML content is rejected and the document will generate an error.</Body>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1064579"></A>
Format</Body>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1064581"></A>
Ingest documents as a particular format, such as XML, Text, or Binary. Default indicates to ingest documents as any format. Documents that are not originally of the specified format will be converted to that format.</Body>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1064575"></A>
Encoding</Body>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1065511"></A>
Ingest documents as a particular encoding type, such as UTF-8, ASCII, and so on. See the <Emphasis>
Search Developer's Guide</Emphasis>
 for a list of character set encodings by language. All encodings will be translated into UTF-8 from the specified encoding. The string specified for the encoding option will be matched to an encoding name according to the Unicode Charset Alias Matching rules (http://www.unicode.org/reports/tr22/#Charset_Alias_Matching). Auto indicates to use an automatic encoding detector. If no encoding can be detected, the encoding defaults to UTF-8. </Body>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1064571"></A>
Language</Body>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1064573"></A>
Add an <code>
xml:lang</code>
 attribute to the root element node on all ingested documents to indicate they are written in a particular language, such as English or French. Default indicates to not tag ingested documents with an <code>
xml:lang</code>
 attribute.</Body>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1064567"></A>
Default namespace</Body>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<Body>
<A ID="pgfId-1065724"></A>
The namespace to use if there is no namespace at the root node of the document. The default value is &quot;&quot;.</Body>
<WarningList>
<Warning>
<A ID="pgfId-1069429"></A>
If you specify a default namespace in a collector, you must also specify the same namespace in the transformers you use in the flow. Otherwise the transformer will not work.</Warning>
</WarningList>
</CELL>
</ROW>
</TABLE>
<Heading-2>
<A ID="pgfId-1063556"></A>
<A ID="15084"></A>
Transform</Heading-2>
<Body>
<A ID="pgfId-1067310"></A>
Transformation allow you to modify the content of files as they are loaded into the database. The topics in this section are as follows:</Body>
<Body-bullet>
<A ID="pgfId-1067314"></A>
<A href="loadingContent.xml#id(81013)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Selecting a Transformer</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1067318"></A>
<A href="loadingContent.xml#id(40264)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Renaming Elements or Attributes</Hyperlink>
</A></Body-bullet>
<Heading-3>
<A ID="pgfId-1067339"></A>
<A ID="81013"></A>
Selecting a Transformer</Heading-3>
<Body>
<A ID="pgfId-1070787"></A>
Transformers are plugins that modify your documents as they loaded into the database. The following transformers are shipped with MarkLogic Server:</Body>
<Body-bullet>
<A ID="pgfId-1070791"></A>
XQuery -- Allows you to add a custom XQuery to transform the documents.</Body-bullet>
<Body-bullet>
<A ID="pgfId-1070792"></A>
Rename -- Renames a specific element or attribute in the loaded documents.</Body-bullet>
<Body-bullet>
<A ID="pgfId-1070784"></A>
XSLT -- Allows you to define a custom XSLT stylesheet.</Body-bullet>
<Body-bullet>
<A ID="pgfId-1067661"></A>
Normalize Dates -- Change dates in an element in the loaded documents.</Body-bullet>
<Body-bullet>
<A ID="pgfId-1067662"></A>
Schema Validation -- Sets the schema validation level.</Body-bullet>
<Body-bullet>
<A ID="pgfId-1067663"></A>
Delete -- Deletes a specific element or attribute from the loaded documents.</Body-bullet>
<Note>
<A ID="pgfId-1068572"></A>
There are performance implications when transforming documents during a load operation, so you must weigh the benefits of transforming documents during load against your performance needs.</Note>
<Body>
<A ID="pgfId-1067346"></A>
How to use each of these transformers is described below. You can also create your own custom transformers, as described in <A href="transform.xml#id(29470)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Creating Custom Transformers' on page&#160;53</A>.</Body>
<Number1>
<A ID="pgfId-1067451"></A>
You can enable a transformer by clicking Add Transformation Step at the bottom of the Transform section of your flow:</Number1>
<Body-indent>
<A ID="pgfId-1067439"></A>
<IMAGE xml:link="simple" href="images/doc-transform-select.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1067482"></A>
Select the type of transformer you want to add to your flow. You can add as many transformers to your flow as you wish.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1070079"></A>
<IMAGE xml:link="simple" href="images/doc-transform-types.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-3>
<A ID="pgfId-1070080"></A>
<A ID="62642"></A>
Custom XQuery</Heading-3>
<Body>
<A ID="pgfId-1070081"></A>
The Custom XQuery transformer allows you add a Content Processing Framework (CPF) action module to modify the loaded documents. The settings window provides a basic template for the CPF action module and directions on where to add your code. Alternatively, you can simply paste in your completed action module. </Body>
<Note>
<A ID="pgfId-1068665"></A>
The module you provide must be a valid CPF action module, or the pipeline will not function properly.</Note>
<Body-indent>
<A ID="pgfId-1068279"></A>
<IMAGE xml:link="simple" href="images/doc-transform-XQuery.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-3>
<A ID="pgfId-1066378"></A>
<A ID="40264"></A>
Renaming Elements or Attributes</Heading-3>
<Body>
<A ID="pgfId-1066450"></A>
The Rename transformer allows you can change the name of an element or attribute in one or more namespaces. Enter the name of the element to change in the Old Nodes Match field and its new name in the New Qname field. Click Submit Query.</Body>
<Body-indent>
<A ID="pgfId-1066485"></A>
<IMAGE xml:link="simple" href="images/doc-transform-renaming.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1069468"></A>
If you have specified a default namespace in your collector, click ‘Add a namespace binding' and specify the same default namespace:</Body>
<Body-indent>
<A ID="pgfId-1069487"></A>
<IMAGE xml:link="simple" href="images/doc-transform-renaming2.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-3>
<A ID="pgfId-1066426"></A>
Deleting Elements or Attributes</Heading-3>
<Body>
<A ID="pgfId-1067511"></A>
The Delete transformer allows you can remove an element or attribute. You can also isolate the element or attribute in a specific namespace to be deleted. Enter the name of the element to delete in the Element Localname field. If deleting an attribute, enter the name of its element in the Element Localname field and the name of the attribute in the Attribute localname field. Click Submit Query.</Body>
<Body-indent>
<A ID="pgfId-1066492"></A>
<IMAGE xml:link="simple" href="images/doc-transform-delete.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1069542"></A>
If you have specified a default namespace in your collector, click ‘Add a namespace binding' and specify the same default namespace:</Body>
<Body-indent>
<A ID="pgfId-1069525"></A>
<IMAGE xml:link="simple" href="images/doc-transform-delete2.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-3>
<A ID="pgfId-1066398"></A>
Customize XSLT Stylesheet</Heading-3>
<Body>
<A ID="pgfId-1067915"></A>
The XSLT transformer allows you to create a custom XSLT stylesheet to apply to the loaded documents. The XSLT stylesheet allows you to modify document content, properties, permissions, and collections.</Body>
<Note>
<A ID="pgfId-1070718"></A>
XSLT cannot be used on binary documents, so they are ignored by this transformer and are passed through unchanged.</Note>
<Body-indent>
<A ID="pgfId-1066499"></A>
<IMAGE xml:link="simple" href="images/doc-transform-xslt.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1070470"></A>
If you are importing an XSLT stylesheet, the stylesheet must have read permission for the <code>
infostudio-user</code>
 role and be stored should be under the <code>
/actions</code>
 root in the <code>
App-Services</code>
 database. Information Studio expects XSLT stylesheets to be located in the <code>
/actions</code>
 directory, so it's not necessary to specify the root directory in your import statement. </Body>
<Body>
<A ID="pgfId-1070549"></A>
For example, to import the stylesheet, <code>
/actions/a.xsl</code>
, the import should look like:</Body>
<Code>
<A ID="pgfId-1070472"></A>
&lt;xsl:import href=&quot;a.xslt&quot;/&gt;</Code>
<Heading-3>
<A ID="pgfId-1066405"></A>
Normalize Dates</Heading-3>
<Body>
<A ID="pgfId-1066471"></A>
The Normalize Dates transformer allows you to specify a text transformation into an <code>
xs:date</code>
 or <code>
xs:dateTime</code>
 value on certain elements in the documents. </Body>
<Body-indent>
<A ID="pgfId-1067268"></A>
<IMAGE xml:link="simple" href="images/doc-transform-date.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body-indent>
<A ID="pgfId-1068063"></A>
Specify the date format</Body-indent>
<Body-indent>
<A ID="pgfId-1068021"></A>
<IMAGE xml:link="simple" href="images/doc-transform-date-format.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body-indent>
<A ID="pgfId-1068028"></A>
You can add the date as a new element, attribute to an existing element, or overwrite and value of an existing element or attribute with the date.</Body-indent>
<Body-indent>
<A ID="pgfId-1068035"></A>
<IMAGE xml:link="simple" href="images/doc-transform-date-element.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1069597"></A>
If you have specified a default namespace in your collector, click ‘Add a namespace binding' and specify the same default namespace for your element and attribute (if applicable):</Body>
<Body-indent>
<A ID="pgfId-1069580"></A>
<IMAGE xml:link="simple" href="images/doc-transform-date-namespace.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-3>
<A ID="pgfId-1066412"></A>
<A ID="88923"></A>
Validate Documents against Schema</Heading-3>
<Body>
<A ID="pgfId-1066478"></A>
The Schema Validation transformer specifies the level at which the XML of loaded documents are to be validated against the schema. Specify <code>
strict</code>
 to make validation failures fatal or <code>
lax</code>
 to produce a warning and continue processing. The default setting is <code>
strict</code>
. For details on the validation levels, see <A href="../xquery/langoverview.xml#id(55039)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Validate Expression</Hyperlink>
</A> in the <Emphasis>
XQuery and XSLT Reference Guide</Emphasis>
.</Body>
<Body-indent>
<A ID="pgfId-1066419"></A>
<IMAGE xml:link="simple" href="images/doc-transform-schema.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-2>
<A ID="pgfId-1063699"></A>
<A ID="67098"></A>
Load</Heading-2>
<Body>
<A ID="pgfId-1063706"></A>
The Load section of the Flow Editor window allows you to configure which database the flow is to load documents. In addition, you can configure the URI structure under which the documents are to be loaded, their access permissions, and the collections under which the documents are to be grouped. The topics in this section are:</Body>
<Body-bullet>
<A ID="pgfId-1065098"></A>
<A href="loadingContent.xml#id(56306)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Selecting the Database</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1065119"></A>
<A href="loadingContent.xml#id(48185)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Document Settings</Hyperlink>
</A></Body-bullet>
<Heading-3>
<A ID="pgfId-1065077"></A>
<A ID="56306"></A>
Selecting the Database</Heading-3>
<Body>
<A ID="pgfId-1070798"></A>
To select the database for the flow, do the following:</Body>
<Number1>
<A ID="pgfId-1065066"></A>
Select the database into which you want this flow to load the content:</Number1>
<Body-indent>
<A ID="pgfId-1063713"></A>
<IMAGE xml:link="simple" href="images/doc-publish-database-select.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1063669"></A>
The total number of documents currently in the database are displayed on the right:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1063794"></A>
<IMAGE xml:link="simple" href="images/doc-publish-total-documents.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-3>
<A ID="pgfId-1070130"></A>
<A ID="48185"></A>
Document Settings</Heading-3>
<Body>
<A ID="pgfId-1070152"></A>
The Document Settings allow you to assign specific attributes to the documents that are loaded into the database. </Body>
<Body-indent>
<A ID="pgfId-1070217"></A>
<IMAGE xml:link="simple" href="images/doc-document-settings.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1070228"></A>
The Document Settings options are:</Body>
<Body-bullet>
<A ID="pgfId-1070170"></A>
<A href="loadingContent.xml#id(64817)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Configuring the URI Structure</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1070174"></A>
<A href="loadingContent.xml#id(44521)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Configuring Document Access Permissions</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1070178"></A>
<A href="loadingContent.xml#id(98735)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Configuring Collections</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1070182"></A>
<A href="loadingContent.xml#id(75277)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Configuring Quality Boost</Hyperlink>
</A></Body-bullet>
<Heading-4>
<A ID="pgfId-1063812"></A>
<A ID="64817"></A>
Configuring the URI Structure</Heading-4>
<Body>
<A ID="pgfId-1068744"></A>
The URI Structure Configuration window allows you to configure the URIs of your loaded documents.</Body>
<Number1>
<A ID="pgfId-1064226"></A>
To configure the URI structure, select the URI tab in the Document Settings window.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1068799"></A>
In the URI Structure Configuration window, you can specify the URI structure of incoming documents and how to handle conflicts between incoming documents and documents that already exist in the database:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1063828"></A>
<IMAGE xml:link="simple" href="images/doc-publish-uri-config1.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1068818"></A>
The URI setting defines the structure of the URI under which files are loaded into the database. A URI can be made up of some or all the following elements and they can be organized in any order:</Number>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1068821"></A>
Element</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1068823"></A>
What it is</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1068825"></A>
Example</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068827"></A>
literal</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068829"></A>
Any literal string in the URI.</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068831"></A>
http://mydocs/</CellBody>
<CellBody>
<A ID="pgfId-1069056"></A>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068833"></A>
guid</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068835"></A>
Globally Unique ID. This specifies to generate a globally unique ID for each file loaded into the database.</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068837"></A>
15908936213503297716</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068839"></A>
path</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068841"></A>
The directory path to the file. By default, this is the same path under which the file is located in the filesystem.</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068843"></A>
C:/latest/docs</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068845"></A>
filename</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068847"></A>
The name of the file.</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068849"></A>
myfile</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068851"></A>
ext</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068853"></A>
The file extension. Note that the dot (.) must be specified in the URI structure as a literal.</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1068855"></A>
xml</CellBody>
</CELL>
</ROW>
</TABLE>
</NumberList>
<Body-indent>
<A ID="pgfId-1068869"></A>
To change the URI structure, simply modify the structure of the URI in the URI field. </Body-indent>
<Body-indent>
<A ID="pgfId-1069101"></A>
For example, the default URI is:</Body-indent>
<Code>
<A ID="pgfId-1068929"></A>
/content{$path}/{$filename}.{$ext}</Code>
<Body-indent>
<A ID="pgfId-1068948"></A>
This means a file named, <code>
C:/mydir/mydocument.xml</code>
 will be loaded with the following URI:</Body-indent>
<Code>
<A ID="pgfId-1068955"></A>
/contentC:/mydir/mydocument.xml</Code>
<Body-indent>
<A ID="pgfId-1068915"></A>
Changing the URI structure to:</Body-indent>
<Code>
<A ID="pgfId-1069041"></A>
/http://mydir/{$filename}.{$ext}</Code>
<Body-indent>
<A ID="pgfId-1069026"></A>
results in the URI:</Body-indent>
<Code>
<A ID="pgfId-1069011"></A>
/http://mydir/mydocument.xml</Code>
<Body-indent>
<A ID="pgfId-1069085"></A>
Changing the URI structure to:</Body-indent>
<Code>
<A ID="pgfId-1069086"></A>
/mydir/{$filename}</Code>
<Body-indent>
<A ID="pgfId-1069087"></A>
results in the URI:</Body-indent>
<Code>
<A ID="pgfId-1069088"></A>
/mydir/mydocument</Code>
<NumberList>
<Number>
<A ID="pgfId-1068922"></A>
The ‘If a document already exists at this URI' buttons provide the following options for handling incoming documents that have the same URI as an existing document in the database:</Number>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1069184"></A>
Option</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1069186"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069188"></A>
Ignore Incoming document</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069190"></A>
Do not update an existing document in the database with the incoming document.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069192"></A>
Replace</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069194"></A>
Replace the existing document in the database with the incoming document. </CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069196"></A>
Error</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1069198"></A>
Generate an error if an existing document in the database has the same URI as the incoming document.</CellBody>
</CELL>
</ROW>
</TABLE>
</NumberList>
<Heading-4>
<A ID="pgfId-1063983"></A>
<A ID="44521"></A>
Configuring Document Access Permissions</Heading-4>
<Body>
<A ID="pgfId-1063860"></A>
As described in <A href="../security/permissions.xml#id(20759)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Permissions on Documents</Hyperlink>
</A> in the <Emphasis>
Understanding and Using Security Guide</Emphasis>
 Guide, you can specify permissions on the ingested documents to control which users can access them and in what manner.</Body>
<Number1>
<A ID="pgfId-1064988"></A>
To set the permissions for the documents ingested by this flow, select the Permissions tab in the Document Settings window.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1064002"></A>
Enter the Role for which you want to set a permission, then select the permission to assign to the role from pull-down menu:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1064107"></A>
<IMAGE xml:link="simple" href="images/doc-publish-permissions-role.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1064132"></A>
To add a new permission, click New Permission and repeat the procedure described above. You can add as many permissions for as many roles as you like:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1064157"></A>
<IMAGE xml:link="simple" href="images/doc-publish-permissions-add.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-4>
<A ID="pgfId-1064017"></A>
<A ID="98735"></A>
Configuring Collections</Heading-4>
<Body>
<A ID="pgfId-1064195"></A>
Collections are described in detail in <A href="../admin/security.xml#id(43189)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Protected Collections</Hyperlink>
</A> in the <Emphasis>
Administrator's Guide</Emphasis>
. This section describes how to specify the collections to be associated with the documents ingested by this flow.</Body>
<Number1>
<A ID="pgfId-1065042"></A>
To set the collections for the documents ingested by this Flow, select the Collections tab in the Document Settings window.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1063769"></A>
You can add or remove collections in the Destination Collections window:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1063577"></A>
<IMAGE xml:link="simple" href="images/doc-publish-collection-add.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-4>
<A ID="pgfId-1068467"></A>
<A ID="75277"></A>
Configuring Quality Boost</Heading-4>
<Body>
<A ID="pgfId-1068508"></A>
Quality Boost associates all ingested documents with the specified quality value. A positive value increases the relevance score of the document in text search functions. The converse is true for a negative value. Leaving this field blank specifies the default document quality, which is 0.</Body>
<Body>
<A ID="pgfId-1070375"></A>
To set the quality boost for the documents ingested by this Flow, select the Quality Boost tab in the Document Settings window:</Body>
<Body-indent>
<A ID="pgfId-1068459"></A>
<IMAGE xml:link="simple" href="images/doc-quality-boost.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-2>
<A ID="pgfId-1064060"></A>
<A ID="28595"></A>
Launching Ingestion and Tracking Status</Heading-2>
<Body>
<A ID="pgfId-1064067"></A>
The Status portion of the flow shows the status of the ingest operations and any resulting errors when ingestion has completed.</Body>
<Number1>
<A ID="pgfId-1066183"></A>
When you have finished configuring your flow and are ready to begin ingesting documents into the database, click the Start Load button:</Number1>
<Body-indent>
<A ID="pgfId-1064074"></A>
<IMAGE xml:link="simple" href="images/doc-ingest-launch.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1064081"></A>
The Status portion of your flow displays the ticket status and progress of the documents at the Collecting, Processing, and Loaded stages of the flow:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1066090"></A>
<IMAGE xml:link="simple" href="images/doc-ingest-status1.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1066097"></A>
When the ingestion has completed, the Status indicates the ticket status as ‘completed' and the number of documents that were successfully ingested into the database. If there were errors, you can click on the errors link.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1066104"></A>
<IMAGE xml:link="simple" href="images/doc-ingest-errors1.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1066120"></A>
The errors window includes both collection errors and processing errors. Click on any error for more detail.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1066131"></A>
<IMAGE xml:link="simple" href="images/doc-ingest-errors2.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1069398"></A>
If you wish to remove the loaded documents from the database, Click Unload:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1069402"></A>
<IMAGE xml:link="simple" href="images/doc-ingest-unload.gif" show="embed" actuate="auto"/>
</Body-indent>
<Heading-2>
<A ID="pgfId-1066138"></A>
<A ID="32404"></A>
Deleting a Flow</Heading-2>
<Body>
<A ID="pgfId-1069711"></A>
To delete a flow, click the Delete link associated with the flow in the Information Studio Flows section of the Application Services page. Click OK in the ‘Are you sure you'd like to delete this flow?' popup window.</Body>
<Body-indent>
<A ID="pgfId-1066145"></A>
<IMAGE xml:link="simple" href="images/doc-flow-delete.gif" show="embed" actuate="auto"/>
</Body-indent>
</XML>
