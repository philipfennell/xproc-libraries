<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="databases.css" type="text/css" charset="UTF-8"?>
<XML>
<TITLE> </TITLE><Heading-1>
<A ID="pgfId-1038002"></A>
<A ID="69630"></A>
Databases</Heading-1>
<pagenum>
<A ID="pgfId-1040305"></A>
117</pagenum>
<Body>
<A ID="pgfId-1038003"></A>
This section introduces basic database management procedures. Later sections in this guide introduce some concepts for tuning the performance of your databases. For information on database backup and restore operations, see <A href="backup_restore.xml#id(93243)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Backing Up and Restoring a Database' on page&#160;152</A>. The following topics are included:</Body>
<Body-bullet>
<A ID="pgfId-1038821"></A>
<A href="databases.xml#id(20587)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Understanding Databases</Hyperlink>
</A></Body-bullet>
<Body-bullet-2>
<A ID="pgfId-1045630"></A>
<A href="databases.xml#id(79044)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Schemas and Security Databases</Hyperlink>
</A></Body-bullet-2>
<Body-bullet-2>
<A ID="pgfId-1045638"></A>
<A href="databases.xml#id(38484)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Modules Database</Hyperlink>
</A></Body-bullet-2>
<Body-bullet-2>
<A ID="pgfId-1045642"></A>
<A href="databases.xml#id(56160)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Triggers Database</Hyperlink>
</A></Body-bullet-2>
<Body-bullet-2>
<A ID="pgfId-1045647"></A>
<A href="databases.xml#id(93323)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Database Settings</Hyperlink>
</A></Body-bullet-2>
<Body-bullet-2>
<A ID="pgfId-1045651"></A>
<A href="databases.xml#id(69034)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Example of Databases in MarkLogic Server</Hyperlink>
</A></Body-bullet-2>
<Body-bullet>
<A ID="pgfId-1038839"></A>
<A href="databases.xml#id(60599)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Creating a New Database</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1038843"></A>
<A href="databases.xml#id(48000)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Attaching and/or Detaching Forests to/from a Database</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1038847"></A>
<A href="databases.xml#id(10788)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Viewing Database Settings</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1044931"></A>
<A href="databases.xml#id(49467)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Loading Documents into a Database</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1038859"></A>
<A href="databases.xml#id(53046)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Merging a Database</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1051780"></A>
<A href="databases.xml#id(77401)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Reindexing a Database</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1051802"></A>
<A href="databases.xml#id(57840)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Clearing a Database</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1051466"></A>
<A href="databases.xml#id(20939)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Disabling a Database</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1051492"></A>
<A href="databases.xml#id(23451)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Deleting a Database</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1050810"></A>
<A href="databases.xml#id(92085)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Checking and Setting Permissions for a Document in a Database</Hyperlink>
</A></Body-bullet>
<Body>
<A ID="pgfId-1053518"></A>
This chapter describes how to use the Admin Interface to create and configure databases. For details on how create and configure databases using Information Studio, see the <Emphasis>
Information Studio Developer's Guide</Emphasis>
. For details on how to create and configure groups programmatically, see <A href="../AdminAPI/configure.xml#id(26239)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Creating and Configuring Forests and Databases</Hyperlink>
</A> in the <Emphasis>
Scripting Administrative Tasks Guide</Emphasis>
. </Body>
<Heading-2>
<A ID="pgfId-1038004"></A>
<A ID="20587"></A>
Understanding Databases</Heading-2>
<Body>
<A ID="pgfId-1038803"></A>
A <Emphasis>
database</Emphasis>
 in MarkLogic Server serves as a layer of abstraction between forests and HTTP, WebDAV, or XDBC servers. A database is made up of data <Emphasis>
forests</Emphasis>
 that are configured on hosts within the same cluster but not necessarily in the same group. It enables a set of one or more forests to appear as a single contiguous set of content for query purposes. See <A href="forests.xml#id(43487)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Understanding Forests' on page&#160;173</A> for more detail on forests.</Body>
<Body>
<A ID="pgfId-1038005"></A>
Multiple HTTP, XDBC, and WebDAV servers can be connected to the same database, allowing different applications to be deployed over a common content base. A database can also span forests that are configured on multiple hosts enabling data scalability through hardware expansion. To ensure database consistency, all forests that are attached to a database must be available in order for the database to be available.</Body>
<Heading-3>
<A ID="pgfId-1052113"></A>
<A ID="79044"></A>
Schemas and Security Databases</Heading-3>
<Body>
<A ID="pgfId-1052114"></A>
The installation process creates five auxiliary databases by default - Documents, Last-Login, Schemas, Security, <Emphasis>
Modules</Emphasis>
, and <Emphasis>
Triggers</Emphasis>
. Every database points to a security database and a schema database. Security configuration information is stored in the security database and schemas are stored in the schemas database. A database can point back to itself for the security and schemas databases, storing the security information and schemas in the same repository as the documents. However, security objects created through the Admin Interface are stored in the Security database by default. MarkLogic recommends leaving databases connected to Security as their security database.</Body>
<Heading-3>
<A ID="pgfId-1039812"></A>
<A ID="38484"></A>
Modules Database</Heading-3>
<Body>
<A ID="pgfId-1039817"></A>
The <Emphasis>
modules</Emphasis>
 database is an auxiliary database that is used to store executable XQuery code. During installation, a database named <Emphasis>
Modules</Emphasis>
 is created, but any database can be used as a modules database, as long as the HTTP or XDBC server is configured to use it as a modules database. Also, it is possible to use the same database to store executable modules, to store queryable documents, and/or to store triggers.</Body>
<Body>
<A ID="pgfId-1039831"></A>
If you use a modules database, each executable document in the database must have the root (specified in the HTTP or XDBC server) as a prefix to its URI. Also, the database should have <code>
automatic</code>
 directory creation enabled, because all directories implied by a document URI must exist in order for the document to be executable. For information about directories and roots, see <A href="webdav.xml#id(70236)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Directories' on page&#160;47</A> and <A href="webdav.xml#id(25553)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Server Root Directory' on page&#160;49</A>.</Body>
<Body>
<A ID="pgfId-1039861"></A>
For example, if you are using a modules database and specify a root in an HTTP or XDBC server of <code>
http://marklogic.com/</code>
, the following documents are executable from that server:</Body>
<Code>
<A ID="pgfId-1039866"></A>
http://marklogic.com/default.xqy
http://marklogic.com/myXQueryFiles/search_db.xqy</Code>
<Body>
<A ID="pgfId-1039889"></A>
but the following files are not executable (because they do not have URIs that start with the root):</Body>
<Code>
<A ID="pgfId-1039884"></A>
http://mycompany.com/default.xqy
/myXQueryFiles/search_db.xqy</Code>
<Body>
<A ID="pgfId-1040238"></A>
In order to execute any documents in a modules database, the documents must be loaded with execute permissions. You can do this either by loading the documents as a user with default privileges that include execute permissions, or by setting those permissions on the document after it loads. For information on using permissions, privileges, and other security features in MarkLogic Server, see <A href="security.xml#id(73923)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Security Administration' on page&#160;187</A> and the chapters related to security in the <Emphasis>
Application Developer's Guide</Emphasis>
. </Body>
<Heading-3>
<A ID="pgfId-1038007"></A>
<A ID="56160"></A>
Triggers Database</Heading-3>
<Body>
<A ID="pgfId-1040416"></A>
The <Emphasis>
triggers</Emphasis>
 database is an auxiliary database that is used to store triggers. During installation, a database named <Emphasis>
Triggers</Emphasis>
 is created, but any database can be used as a triggers database. Also, it is possible to use the same database to store executable modules, to store queryable documents, and/or to store triggers. A triggers database is required if you are using the Content Processing Framework. For details on the Content Processing Framework, see <Emphasis>
Content Processing Framework Guide</Emphasis>
.</Body>
<Heading-3>
<A ID="pgfId-1040415"></A>
<A ID="93323"></A>
Database Settings</Heading-3>
<Body>
<A ID="pgfId-1038876"></A>
Each database has settings that control various aspects of a database such as memory allocation, indexing options, and so on. You configure these settings in the Admin Interface. You can configure the following basic types of settings for each database:</Body>
<Body-bullet>
<A ID="pgfId-1038891"></A>
<A href="databases.xml#id(84130)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Basic Administrative Settings</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1046912"></A>
<A href="databases.xml#id(38196)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Index Settings that Affect Documents</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1047189"></A>
<A href="databases.xml#id(28645)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Reindexing Settings</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1047200"></A>
<A href="databases.xml#id(77652)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Document and Directory Settings</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1039746"></A>
<A href="databases.xml#id(59939)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Memory and Journal Settings</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1047332"></A>
<A href="databases.xml#id(28720)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Other Settings</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1046054"></A>
<A href="databases.xml#id(60612)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Merge Control Settings</Hyperlink>
</A></Body-bullet>
<Heading-4>
<A ID="pgfId-1038881"></A>
<A ID="84130"></A>
Basic Administrative Settings</Heading-4>
<Body>
<A ID="pgfId-1038886"></A>
The administrative settings configure properties such as the database name and which security and schema databases a database uses. These settings take effect immediately after any changes are made in the Admin Interface.</Body>
<TableAnchor>
<A ID="pgfId-1039720"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1040259"></A>
Database Setting</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1040261"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1040263"></A>
<code>
database name</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1040265"></A>
The name of the database.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1040267"></A>
<code>
security database</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1040269"></A>
The name of the security database which this database accesses.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1040271"></A>
<code>
schema database</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1040273"></A>
The name of the schemas database which this database accesses.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1043842"></A>
<code>
triggers database</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1043844"></A>
The name of the triggers database which this database accesses.</CellBody>
</CELL>
</ROW>
</TABLE>
<Heading-4>
<A ID="pgfId-1046786"></A>
<A ID="38196"></A>
Index Settings that Affect Documents</Heading-4>
<Body>
<A ID="pgfId-1046787"></A>
When you change any index settings for a database, the new settings take effect based on whether reindexing is enabled (<code>
reindexer enable</code>
 set to <code>
true</code>
). For more details on text indexes, see <A href="text_index.xml#id(37170)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Text Indexing' on page&#160;214</A>.</Body>
<Body>
<A ID="pgfId-1046791"></A>
In general, adding index options will have the effect of slowing document loading and increasing the size of database files.</Body>
<TableAnchor>
<A ID="pgfId-1046899"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1046794"></A>
Database Setting</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1046796"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047210"></A>
<code>
language</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047212"></A>
Specifies the default language for content in this database. Any content without an <code>
xml:lang</code>
 attribute will be indexed in the language specified here. You should have a license key if you specify a non-English language; if you specify a non-english language and do not have a license for that language, the stemming and tokenization will be generic.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046809"></A>
<code>
stemmed searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046811"></A>
Stemmed word searches enabled. Stemmed searches match not only the exact word in the search, but also words that come from the same stem and mean the same thing (for example, a search for <code>
be</code>
 will also match the term <code>
is</code>
). For more details on stemmed searches, see the chapter 'Understanding and Using Stemmed Searches' in the <Emphasis>
Application Developer's Guide</Emphasis>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046816"></A>
<code>
word searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046818"></A>
Unstemmed word searches enabled. Enables searches for exact matches of words.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047240"></A>
<code>
word positions</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047242"></A>
Index word positions for faster phrase and <code>
cts:near-query</code>
 searches.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046834"></A>
<code>
fast phrase searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046836"></A>
Speeds up phrase searches by eliminating some false positive results.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046838"></A>
<code>
fast case sensitive searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046840"></A>
Speeds up case sensitive searches by eliminating some false positive results.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050651"></A>
<code>
fast reverse searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050653"></A>
Speeds up reverse query searches by indexing saved queries.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046842"></A>
<code>
fast diacritic sensitive searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046844"></A>
Speeds up diacritic-sensitive searches by eliminating some false positive results.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046846"></A>
<code>
fast element word searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046848"></A>
Speeds up element-word searches by eliminating some false positive results.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046866"></A>
<code>
element word positions</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046868"></A>
Index element word positions for faster element-based phrase and <code>
cts:near-query</code>
 searches.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047262"></A>
<code>
fast element phrase searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047264"></A>
Speeds up element phrase searches by eliminating some false positive results.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046870"></A>
<code>
element value positions</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046872"></A>
Index element word positions for faster element-based phrase and <code>
cts:near-query</code>
 searches that use <code>
cts:element-value-query</code>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050665"></A>
<code>
attribute value positions</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050667"></A>
Index attribute word positions for faster attribute-based phrase and <code>
cts:near-query</code>
 searches that use <code>
cts:element-value-query</code>
 and faster <code>
cts:element-query</code>
 searches that use a <code>
cts:element-attribute-*-query</code>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047248"></A>
<code>
trailing wildcard searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047250"></A>
Faster wildcard searches with the wildcard at the end of the search pattern (for example, <code>
abc*</code>
). For more details about wildcard searches, see the chapter 'Understanding and Using Wildcard Searches' in the <Emphasis>
Application Developer's Guide</Emphasis>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047274"></A>
<code>
trailing wildcard word positions</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047276"></A>
Index word positions for trailing wildcard searches.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047282"></A>
<code>
fast element trailing wildcard searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047284"></A>
Faster wildcard searches with the wildcard at the end of the search pattern within a specific element, but slower document loads and larger database files.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047255"></A>
<code>
three character searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047257"></A>
Enables wildcard searches where the search pattern contains three or more consecutive non-wildcard characters (for example, <code>
abc*x</code>
, <code>
*abc</code>
, <code>
a?bcd</code>
). When combined with a codepoint word lexicon, speeds the performance of any wildcard search (including searches with fewer than three consecutive non-wildcard characters). MarkLogic recommends combining the <code>
three character search</code>
 index with a codepoint collation word lexicon. For more details about wildcard searches, see the chapter 'Understanding and Using Wildcard Searches' in the <Emphasis>
Application Developer's Guide</Emphasis>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047266"></A>
<code>
three character word positions</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047268"></A>
Index word positions for three-character wildcard queries.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046886"></A>
<code>
two character searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046888"></A>
Enables wildcard searches where the search pattern contains two or more consecutive non-wildcard characters (for example, <code>
ab*</code>
). This index is not needed if you have <code>
three character searches</code>
 and a word lexicon. For more details about wildcard searches, see the chapter 'Understanding and Using Wildcard Searches' in the <Emphasis>
Application Developer's Guide</Emphasis>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050685"></A>
<code>
one character searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050687"></A>
Enables wildcard searches where the search pattern contains a single non-wildcard characters (for example, <code>
a*</code>
). This index is not needed if you have <code>
three character searches</code>
 and a word lexicon. For more details about wildcard searches, see the chapter 'Understanding and Using Wildcard Searches' in the <Emphasis>
Application Developer's Guide</Emphasis>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047298"></A>
<code>
fast element character searches</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047300"></A>
Enables wildcard searches and speeds up element-based wildcard searches. For more details about wildcard searches, see the chapter 'Understanding and Using Wildcard Searches' in the <Emphasis>
Application Developer's Guide</Emphasis>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050707"></A>
<code>
word lexicon</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050709"></A>
Maintains a lexicon of all of the words in a database, with uniqueness determined by a specified collation. Additionally, works in combination with the <code>
three character search</code>
 index to speed wildcard searches. For more details about wildcard searches, see the chapter 'Understanding and Using Wildcard Searches' in the <Emphasis>
Application Developer's Guide</Emphasis>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047306"></A>
<code>
uri lexicon</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047308"></A>
Maintains a lexicon of all of the URIs used in a database. The URI lexicon speeds up queries that constrain on URIs. It is like a range index of all of the URIs in the database. To access values from the URI lexicon, use the <code>
cts:uris</code>
 or <code>
cts:uri-match</code>
 APIs.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047294"></A>
<code>
collection lexicon</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047296"></A>
Maintains a lexicon of all of the collection URIs used in a database. The collection lexicon speeds up queries that constrain on collections. It is like a range index of all of the collection URIs in the database. To access values from the collection lexicon, use the <code>
cts:collections</code>
 or <code>
cts:collection-match</code>
 APIs.</CellBody>
</CELL>
</ROW>
</TABLE>
<Heading-4>
<A ID="pgfId-1039659"></A>
<A ID="28645"></A>
Reindexing Settings</Heading-4>
<Body>
<A ID="pgfId-1046916"></A>
The reindexing settings enable or disable reindexing and allow you to force reindexing of older fragments.</Body>
<TableAnchor>
<A ID="pgfId-1046953"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1046920"></A>
Database Setting</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1046922"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046968"></A>
<code>
reindexer enable</code>
<A ID="11443"></A>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046970"></A>
When set to <code>
true</code>
, index configuration changes automatically initiate a background reindexing operation on the entire database. When set to <code>
false</code>
, any new index settings take effect for future documents loaded into the database; existing documents retain the old settings until they are reloaded or until you set <code>
reindexer enable</code>
 to <code>
true</code>
. For information on how the reindexer effects queries, see <A href="text_index.xml#id(29854)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Query Behavior with Reindex Settings Enabled and Disabled' on page&#160;229</A>.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046975"></A>
<code>
reindexer throttle</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046977"></A>
Sets the priority of system resources devoted to reindexing. Higher numbers give reindexing a higher priority.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046950"></A>
<code>
reindexer timestamp</code>
<A ID="94439"></A>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046952"></A>
Specifies the timestamp of fragments to force a reindex/refragment operation. Click the <code>
get current timestamp</code>
 button to enter the current system timestamp. When you set this parameter to a timestamp and <code>
reindex enable</code>
 is set to <code>
true</code>
, it causes a reindex and refragment operation on all fragments in the database that have a timestamp equal to or less than the specified timestamp. Note that if you restore a database that has a timestamp set, if there are fragments in the restored content that are older than the specified content, they will start to reindex as soon as they are restored.</CellBody>
</CELL>
</ROW>
</TABLE>
<Heading-4>
<A ID="pgfId-1038875"></A>
<A ID="77652"></A>
Document and Directory Settings</Heading-4>
<Body>
<A ID="pgfId-1044149"></A>
The document and directory settings affect the default settings for how documents and directories are created in the database. </Body>
<TableAnchor>
<A ID="pgfId-1043901"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1046459"></A>
Database Setting</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1046461"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046463"></A>
<code>
directory creation</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046465"></A>
Specifies if directories should be automatically created when a document is created. If you are using the database to store documents accessible via a WebDAV server or as a Modules database, this setting should be set to <code>
automatic</code>
. The following are the settings:</CellBody>
<Body-bullet>
<A ID="pgfId-1046466"></A>
<code>
automatic</code>
--directories are automatically created based on the URI of a document.</Body-bullet>
<Body-bullet>
<A ID="pgfId-1046467"></A>
<code>
manual-enforced</code>
--requires that the directory hierarchy corresponding to the URI exists before creating a document. If you create a document where the corresponding directory hierarchy does not exist, an error is raised. For example, if you try to create a document with the URI:</Body-bullet>
<Code>
<A ID="pgfId-1046468"></A>
<code>
http://marklogic.com/file.xml</code>
</Code>
<Body-indent>
<A ID="pgfId-1046469"></A>
then the directory with URI <code>
http://marklogic.com/</code>
 must exist. Otherwise, an error is raised. This setting provides the same behavior as a file system.</Body-indent>
<Body-bullet>
<A ID="pgfId-1046470"></A>
<code>
manual</code>
--directories are not automatically created, but documents can still be created without corresponding directories.</Body-bullet>
<Body>
<A ID="pgfId-1046474"></A>
For more information about directories, see <A href="webdav.xml#id(70236)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Directories' on page&#160;47</A>. For more information about Modules databases, see <A href="databases.xml#id(38484)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Modules Database' on page&#160;97</A>.</Body>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046746"></A>
<code>
maintain last modified</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046748"></A>
Creates and updates the last-modified property each time a document is created or updated. The default is <code>
true</code>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046515"></A>
<code>
maintain directory last modified</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046517"></A>
Creates and updates the last-modified property on a directory each time a directory is created or updated. If set to <code>
true</code>
, update operations on documents in a directory will also update the directory last-modified timestamp, which can cause some contention when multiple documents in the directory are being updated. If your application is experiencing contention during these type of updates (for example, if you see deadlock-detected messages in the error log), set this property to <code>
false</code>
. The default is <code>
false</code>
.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046483"></A>
<code>
inherit permissions</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046485"></A>
When set to <code>
true</code>
, documents and directories automatically inherit permissions from their parent directory (if permissions are not set explicitly when creating the document or directory). If there are any default permissions on the user who is creating the document or directory, those permissions are combined with any inherited permissions.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046487"></A>
<code>
inherit collections</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046489"></A>
When set to <code>
true</code>
, documents and directories automatically inherit collection settings from their parent directory (if collections are not set explicitly when creating the document or directory). If there are any default collections on the user who is creating the document or directory, those permissions are combined with any inherited collections.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046491"></A>
<code>
inherit quality</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1046493"></A>
When set to <code>
true</code>
, documents and directories automatically inherit any quality settings from their parent directory (if quality is not set explicitly when creating the document or directory).</CellBody>
</CELL>
</ROW>
</TABLE>
<Heading-4>
<A ID="pgfId-1047009"></A>
<A ID="59939"></A>
Memory and Journal Settings</Heading-4>
<Body>
<A ID="pgfId-1047010"></A>
The memory and journal settings are automatically configured at installation time. The memory settings configure the memory limits for the system, and the journal settings control the transactional journal, used for recovery if a database transaction fails. The default settings should be sufficient for most systems. Depending on the system workload, setting the memory settings incorrectly can adversely affect performance; if you need to change the settings, contact MarkLogic Support.</Body>
<TableAnchor>
<A ID="pgfId-1047046"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1047013"></A>
Database Setting</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1047015"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047017"></A>
<code>
in memory limit</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047019"></A>
The maximum number of fragments in an in-memory stand. An in-memory stand contains the latest version of any new or changed fragments. Periodically, in-memory stands are written to disk as a new stand in the forest. Also, if a stand accumulates a number of fragments beyond this limit, it is automatically saved to disk by a background thread.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047021"></A>
<code>
in memory list size</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047023"></A>
The size, in megabytes, of the in-memory list storage.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047025"></A>
<code>
in memory tree size</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047027"></A>
The size, in megabytes, of the in-memory tree storage. The <code>
in&#160;memory&#160;tree&#160;size</code>
 should be at least 1 or 2 megabytes larger than the largest binary or text document you plan on loading into the database.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047029"></A>
<code>
in memory range index size</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047031"></A>
The size, in megabytes, of the in-memory range index storage.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050730"></A>
<code>
in memory reverse index size</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1050732"></A>
The size, in megabytes, of the in-memory reverse index storage.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1058729"></A>
<code>
locking</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1058731"></A>
Specifies how robust transaction locking should be. When set to <code>
strict</code>
, locking enforces mutual exclusion on existing documents and on new documents. When set to <code>
fast</code>
, locking enforces mutual exclusion on existing documents but not on new documents; therefore, it is possible to create documents or directories with duplicate URIs when set to <code>
fast</code>
, so use caution, and do not use when directory-creation is set to automatic (because automatic directory creation creates directories implicitly). When set to <code>
off</code>
, locking does not enforce mutual exclusion on existing documents or on new documents; only use this setting if you are sure all documents you are loading are new (a new bulk load, for example), otherwise you might create duplicate URIs in the database. </CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1058725"></A>
<code>
journaling</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1058727"></A>
Specifies how robust transaction journaling should be. When set to <code>
strict</code>
, the journal protects against MarkLogic Server process failures, host operating system kernel failures, and host hardware failures. When set to <code>
fast</code>
, the journal protects against MarkLogic Server process failures but not against host operating system kernel failures or host hardware failures. When set to <code>
off</code>
, the journal does not protect against MarkLogic Server process failures, host operating system kernel failures, or host hardware failures. </CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047033"></A>
<code>
journal size</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047035"></A>
The size, in megabytes, of each journal file. The system uses journal files for recovery operations if a transaction fails to complete successfully. The default value should be sufficient for most systems; it is calculated at database configuration time based on the size of your system. If you change the other memory settings, however, the journal size should equal the sum of the <code>
in&#160;memory&#160;list&#160;size</code>
 and the <code>
in&#160;memory&#160;tree&#160;size</code>
. Additionally, you should add space to the journal size if you use range indexes (particularly if you use a lot of range indexes or have extremely large range indexes), as range index data can take up journal space. Also, if your transactions span multiple forests, you may also need to add journal size, as each journal must keep the lock information for all of the documents in the transaction, not just for the documents that reside in the forest in which the journal exists.</CellBody>
<CellBody>
<A ID="pgfId-1047036"></A>
</CellBody>
<CellBody>
<A ID="pgfId-1047037"></A>
When you change the journal size, the next time the system creates a new journal, it will use the new size limit; existing journals will continue to use the old size limit until they are replaced with new ones (for example, when a journal fills up, when a forest is cleared, or when the system is cleanly shutdown and restarted).</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047039"></A>
<code>
preallocate journals</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047041"></A>
Set to <code>
true</code>
 to preallocate journal file disk space, set to <code>
false</code>
 to only allocate space as needed. Preallocating the disk space can help reduce fragmentation of the journal files (as long as the filesystem is not fragmented when you set this property). There are two journal files per forest.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047043"></A>
<code>
preload mapped data</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047045"></A>
Specifies whether memory mapped data (for example, range indexes and word lexicons) is loaded into memory when a forest is mounted to the database. Preloading the memory mapped data improves query performance, but uses more memory, especially if you have a lot of range indexes and/or lexicons. Also, it will cause a lot of disk I/O at database startup time, slowing the system performance during the time the mapped data is read into memory. If you do not preload the mapped data, it will be paged into memory dynamically when a query requests data that needs it, slowing the query response time.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1058737"></A>
<code>
range index optimize</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1058739"></A>
Specifies how range indexes are to be optimized. When set to <code>
facet-time</code>
, range indexes are optimized to minimize the amount of CPU time used. When set to <code>
memory-size</code>
, range indexes are optimized to minimize the amount of memory used. </CellBody>
</CELL>
</ROW>
</TABLE>
<Heading-4>
<A ID="pgfId-1047055"></A>
<A ID="28720"></A>
Other Settings</Heading-4>
<Body>
<A ID="pgfId-1047056"></A>
The following are the remaining database configuration options.</Body>
<TableAnchor>
<A ID="pgfId-1047092"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1047059"></A>
Database Setting</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1047061"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047114"></A>
<code>
position list max size</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047116"></A>
The maximum size, in megabytes, of the position list portion of the index for a given term. If the position list size for a given term grows larger than the limit specified, then the position information for that term is discarded. The default value is 128, the minimum value is 1, and the maximum value is 512. For example, position queries (<code>
cts:near-query</code>
) for frequently occurring words that have reached this limit (words like <Emphasis>
a</Emphasis>
, <Emphasis>
an</Emphasis>
, <Emphasis>
the</Emphasis>
, and so on) are resolved without using the indexes. Even though those types of words are resolved without using the indexes, this limit helps improve performance by making the indexes smaller and more efficient in relation to the content actually loaded in the database.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047063"></A>
<code>
format compatibility</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047065"></A>
Specifies the version compatibility that MarkLogic Server applies to the indexes for this database during request evaluation. Setting this to a value other than <code>
automatic</code>
 specifies that all forest data has the specified on-disk format, and it disables the automatic checking for index compatibility information. The automatic detection occurs during database startup and after any database configuration changes, and can take some time and system resources for very large forests and for very large clusters. The default value of <code>
automatic</code>
 is recommended for most installations.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047067"></A>
<code>
index detection</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047069"></A>
Specifies whether to auto-detect index compatibility between the content and the current database settings. This detection occurs during database startup and after any database configuration changes, and can take some time and system resources for very large forests and for very large clusters. Setting this to <code>
none</code>
 also causes queries to use the current database index settings, even if some settings have not completed reindexing. The default value of <code>
automatic</code>
 is recommended for most installations.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047071"></A>
<code>
expunge locks</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1047073"></A>
Specifies if MarkLogic Server will automatically expunge any lock fragments created using <code>
xdmp:lock-acquire</code>
 with specified timeouts. If you set this to none, the lock fragments will remain in the database after the locks expire (although they will no longer be locking any documents) until they are explicitly removed with <code>
xdmp:lock-release</code>
. Setting this to <code>
none </code>
is only recommended to speed cluster startup time for extremely large clusters. The default setting of <code>
automatic</code>
, which cleans up the locks as they expire, is recommended for most installations.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1059069"></A>
<code>
tf normalization</code>
</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1059071"></A>
Specifies whether to use the default term-frequency normalization (<code>
scaled-log</code>
), which scales the term frequency based on the size of the document, or to use the <code>
unscaled-log</code>
, which uses term frequency as a function of the actual term frequency in a document, regardless of the document size, or to choose an intermediate level of scaling with lower impact than the default document size-based scaling. </CellBody>
</CELL>
</ROW>
</TABLE>
<Heading-4>
<A ID="pgfId-1046057"></A>
<A ID="60612"></A>
Merge Control Settings</Heading-4>
<Body>
<A ID="pgfId-1046071"></A>
The merge control settings allow you to control when merges occur, set merge parameters, and set up blackout periods where you do not want merges to occur. You can access the merge control settings by clicking the Admin Interface menu item for Database &gt; <Emphasis>
db_name</Emphasis>
 &gt; Merge Controls. Use caution when adjusting the merge parameters or disabling merges, as merges are necessary for optimal database performance. For explanations of the merge control settings and more details on controlling merges, see <A href="merges.xml#id(83498)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Understanding and Controlling Database Merges' on page&#160;138</A>.</Body>
<Heading-3>
<A ID="pgfId-1043853"></A>
<A ID="69034"></A>
Example of Databases in MarkLogic Server</Heading-3>
<Body>
<A ID="pgfId-1038810"></A>
This section provides an example which demonstrates the concept of a database and the relationships between a database, a host and a forest in MarkLogic Server.</Body>
<Body>
<A ID="pgfId-1038009"></A>
In the diagram below, Hosts D1, D2 and D3 belong to the Data-Nodes Group. </Body>
<Body>
<A ID="pgfId-1038010"></A>
D1 is the first Host in Data-Nodes Group on which MarkLogic Server is loaded. Three Databases are created by default, Security Database, Schema Database and Documents Database. In the diagram below, 3 Forests, F1, F2 and F3 are configured on Host D1 and assigned to the Security Database, Schema Database and Documents Database respectively. </Body>
<Body>
<A ID="pgfId-1038011"></A>
D2 is the second Host to join the Data-Nodes Group. Forests F4 and F5 are configured on D2 and attached to the Documents Database. </Body>
<Body>
<A ID="pgfId-1038012"></A>
D3 is the third Host to join the Data-Nodes Group and has <Bold>
Forest</Bold>
 F6, configured on it. F6 is also assigned to the <Bold>
Documents Database</Bold>
.</Body>
<Body>
<A ID="pgfId-1038017"></A>
<IMAGE xml:link="simple" href="databases-1.gif" show="embed" actuate="auto"/>
</Body>
<Heading-2>
<A ID="pgfId-1038043"></A>
<A ID="60599"></A>
Creating a New Database</Heading-2>
<Body>
<A ID="pgfId-1038044"></A>
Follow the following steps to create a new database.</Body>
<Number1>
<A ID="pgfId-1038045"></A>
Click the Databases icon in the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038046"></A>
Click the Create tab at the top right. The Create Database page displays:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1044647"></A>
<IMAGE xml:link="simple" href="images/create_db.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1044648"></A>
Enter the name of the database. This is the name the system will use to refer to this database.</Number>
<Number>
<A ID="pgfId-1038054"></A>
Select a security database to be associated with this database. We recommend selecting <Emphasis>
Security</Emphasis>
 as the security database.</Number>
<Number>
<A ID="pgfId-1038055"></A>
Select a schema database to be associated with this database.</Number>
<Number>
<A ID="pgfId-1038056"></A>
You may leave the rest of the parameters unchanged or set them according to your needs.</Number>
<Number>
<A ID="pgfId-1038057"></A>
Click OK.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038058"></A>
Your database is now created. You can now attach forests to the database. Creating a database is a 'hot' admin task.</EndList-root>
<Heading-2>
<A ID="pgfId-1038059"></A>
<A ID="48000"></A>
Attaching and/or Detaching Forests to/from a Database</Heading-2>
<Body>
<A ID="pgfId-1038060"></A>
In order to query content in a forest, it must be attached to a database. Forests can be moved from one database to another (detached from one database and attached to another). Detaching a forest from a database does not delete the forest; the forest remains on the host on which it was created with the data intact. Forests can be moved from one database to another (detached from one and attached to another). However, before you attach the forest to another database, ensure that the new database has the same configuration as the old database. If the configuration of the new database is different and the <code>
reindex enable</code>
 setting is set to <code>
true</code>
 on the new database, the forest will begin reindexing to match the database configuration as soon as it is attached.</Body>
<Body>
<A ID="pgfId-1050794"></A>
You can also attach and detach forests from databases using the Forest Summary page, as described in <A href="forests.xml#id(93728)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Attaching and Detaching Forests Using the Forest Summary Page' on page&#160;179</A>.</Body>
<Body>
<A ID="pgfId-1038061"></A>
Perform the following steps using the Admin Interface to attach or detach one or more forests to a database:</Body>
<Number1>
<A ID="pgfId-1038062"></A>
Click the database to which you want to attach forests.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038063"></A>
Click the Forests icon for the database. The Database Forest Configuration Page appears.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1050745"></A>
<IMAGE xml:link="simple" href="images/database-forest-config.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1038066"></A>
Check the box corresponding to forest(s) you want to attach to the database. You can also uncheck forests you want to detach from the database.</Number>
<Number>
<A ID="pgfId-1038067"></A>
Click OK. </Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038068"></A>
The forests you attached or detached are now reflected in the database configuration. Attaching and detaching a forest to a database are 'hot' admin tasks.</EndList-root>
<Heading-2>
<A ID="pgfId-1038069"></A>
<A ID="10788"></A>
Viewing Database Settings</Heading-2>
<Body>
<A ID="pgfId-1038070"></A>
To view the settings for a particular database, perform the following steps:</Body>
<Number1>
<A ID="pgfId-1038071"></A>
Click the Databases icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038073"></A>
Locate the database for which you want to view settings, either in the tree menu or in the Database Summary table.</Number>
<Number>
<A ID="pgfId-1038074"></A>
Click the name of the database for which you want to view the settings. </Number>
<Number>
<A ID="pgfId-1038075"></A>
View the settings.</Number>
<Number>
<A ID="pgfId-1038076"></A>
Click Forests, Triggers, Content Processing, Fragment Roots, Fragment Parents, Element-Word-Query-Throughs, Phrase-Throughs, Phrase-Arounds, Element Indexes and Attribute Indexes to view settings specific to those aspects of the database.</Number>
</NumberList>
<Heading-2>
<A ID="pgfId-1038077"></A>
<A ID="49467"></A>
Loading Documents into a Database</Heading-2>
<Body>
<A ID="pgfId-1038078"></A>
You can use the Admin Interface to load documents into the database. The documents will be loaded with the default permissions and added to the default collections of the user with which you logged into the Admin Interface. </Body>
<Body>
<A ID="pgfId-1038079"></A>
To load a set of documents into a database, perform the following steps:</Body>
<Number1>
<A ID="pgfId-1038080"></A>
Click the Databases icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038081"></A>
Click on the database into which you want to load the documents.</Number>
<Number>
<A ID="pgfId-1038082"></A>
Click on the Load tab near the top right.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1038086"></A>
<IMAGE xml:link="simple" href="images/db_load.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1038087"></A>
Enter the name of the directory in which the documents are located. This directory must be accessible by the host from which the Admin Interface is currently running.</Number>
<Number>
<A ID="pgfId-1038088"></A>
Enter a filter for the names of the documents to be loaded (for example, <code>
*.xml</code>
 to load all files with an xml extension). For an exact match, enter the full name of the document.</Number>
<Number>
<A ID="pgfId-1038089"></A>
Click OK to proceed.</Number>
<Number>
<A ID="pgfId-1038090"></A>
The load confirmation screen will list all documents in the specified directory matching the specified filter. Click OK to complete the load.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038091"></A>
The documents are loaded into the database. The URI path of the documents are the same as your filesystem path.</EndList-root>
<Heading-2>
<A ID="pgfId-1051566"></A>
<A ID="53046"></A>
Merging a Database</Heading-2>
<Body>
<A ID="pgfId-1051857"></A>
You can merge all of the forest data in the database using the Admin Interface. As described in <A href="merges.xml#id(83498)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Understanding and Controlling Database Merges' on page&#160;138</A>, merging the forests in a database improves performance and is periodically done automatically in the background by MarkLogic Server. The Merge button allows you to explicitly merge the forest data for this database.</Body>
<Body>
<A ID="pgfId-1051864"></A>
To explicitly merge the database, complete the following procedure:</Body>
<Number1>
<A ID="pgfId-1051702"></A>
Click the Databases icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1051703"></A>
Decide which database you want to merge.</Number>
<Number>
<A ID="pgfId-1051704"></A>
Click the database name, either on the tree menu or the summary page.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1051705"></A>
The Database Configuration page displays.</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1051706"></A>
Click the Merge button on the Database Configuration page.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1051707"></A>
A confirmation message displays.</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1051708"></A>
Confirm that you want to merge the forest data in this database and click OK.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1051709"></A>
Merging data in a database is a 'hot' admin task; the changes take effect immediately.</EndList-root>
<Heading-2>
<A ID="pgfId-1051584"></A>
<A ID="77401"></A>
Reindexing a Database</Heading-2>
<Body>
<A ID="pgfId-1051591"></A>
You can reindex all of the document data in the database using the Admin Interface. As described in <A href="text_index.xml#id(37170)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Text Indexing' on page&#160;214</A>, text indexing accelerates the performance of a certain queries and is periodically done automatically in the background by MarkLogic Server. The reindex operation sets the <A href="databases.xml#id(94439)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
reindexer timestamp</Hyperlink>
</A> to the current system timestamp, which causes a reindex and refragment operation on all fragments in the database that have a timestamp equal to or less than the timestamp (assuming <A href="databases.xml#id(11443)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
reindexer enable</Hyperlink>
</A> is set to true). The Reindex button forces a complete reindex/refragment operation on the database.</Body>
<Body>
<A ID="pgfId-1051925"></A>
To reindex the database, complete the following procedure:</Body>
<Number1>
<A ID="pgfId-1051926"></A>
Click the Databases icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1051927"></A>
Decide which database you want to reindex.</Number>
<Number>
<A ID="pgfId-1051928"></A>
Click the database name, either on the tree menu or the summary page.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1051929"></A>
The Database Configuration page displays.</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1051930"></A>
Click the Reindex button on the Database Configuration page.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1051931"></A>
A confirmation message displays.</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1051932"></A>
Confirm that you want to reindex this database and click OK.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1051933"></A>
Reindexing data in a database is a 'hot' admin task; the changes take effect immediately.</EndList-root>
<Heading-2>
<A ID="pgfId-1051030"></A>
<A ID="57840"></A>
Clearing a Database</Heading-2>
<Body>
<A ID="pgfId-1051041"></A>
You can clear all of the forest content from the database using the Admin Interface. Clearing a database deletes all of the content from all of the forests in the database, but leaves the database configuration in tact. </Body>
<Body>
<A ID="pgfId-1051129"></A>
To clear all data from a database, complete the following procedure:</Body>
<Number1>
<A ID="pgfId-1051130"></A>
Click the Databases icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1051131"></A>
Decide which database you want to clear.</Number>
<Number>
<A ID="pgfId-1051132"></A>
Click the database name, either on the tree menu or the summary page.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1051133"></A>
The Database Configuration page displays.</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1051134"></A>
Click the Clear button on the Database Configuration page.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1051135"></A>
A confirmation message displays.</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1051136"></A>
Confirm that you want to clear the forest data from this database and click OK.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1051137"></A>
Clearing a database is a 'hot' admin task; the changes take effect immediately.</EndList-root>
<Heading-2>
<A ID="pgfId-1051048"></A>
<A ID="20939"></A>
Disabling a Database</Heading-2>
<Body>
<A ID="pgfId-1051222"></A>
You can disable a database using the Admin Interface. You can either disable only the database or the database along with all of its forests. Disabling only the database marks the database as disabled and unmounts all the forests from the database. However, the database forests remain enabled. Disabling the database and its forests marks the database and each forest as disabled, unmounts all the forests from the database, and clears all memory caches for all the forests in the database. The database remains unavailable for any query operations while it is disabled. </Body>
<Body>
<A ID="pgfId-1051543"></A>
Disabling a database does not delete the configuration or document data. The database and forest can later be re-enabled by clicking Enable.</Body>
<Body>
<A ID="pgfId-1051269"></A>
To disable a database, complete the following procedure:</Body>
<Number1>
<A ID="pgfId-1051270"></A>
Click the Databases icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1051271"></A>
Decide which database you want to disable.</Number>
<Number>
<A ID="pgfId-1051272"></A>
Click the database name, either on the tree menu or the summary page.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1051273"></A>
The Database Configuration page displays.</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1051274"></A>
Click the Disable button on the Database Configuration page.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1051275"></A>
A confirmation message displays.</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1051276"></A>
Click either Disable Database to disable only the database, or Disable Database and Forests to disable the database and its forests.</Number>
</NumberList>
<Heading-2>
<A ID="pgfId-1038107"></A>
<A ID="23451"></A>
Deleting a Database</Heading-2>
<Body>
<A ID="pgfId-1038108"></A>
A database cannot be deleted if there are any HTTP, WebDAV, or XDBC servers that refer to the database. Deleting a database detaches the forests that are attached to it, but does not delete them. The forests remain on the hosts on which they were created with the data intact. Perform the following steps to delete a database:</Body>
<Number1>
<A ID="pgfId-1038109"></A>
Click the Databases icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1044818"></A>
Locate the database you want to delete, either in the tree menu or in the Database Summary table.</Number>
<Number>
<A ID="pgfId-1044859"></A>
Click the name of the database which you want to delete. </Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1038115"></A>
<IMAGE xml:link="simple" href="images/db_delete.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1038116"></A>
Click on the Delete button near the top right. </Number>
</NumberList>
<Note>
<A ID="pgfId-1044869"></A>
Clicking the Clear button clears all of the forests attached to this database, removing all of the data from the forests. Clicking the Delete button removes the database configuration, but does not delete the data stored in the forests.</Note>
<NumberList>
<Number>
<A ID="pgfId-1038117"></A>
Assuming that there are not any HTTP, WebDAV, or XDBC servers referring to the database, a delete confirmation screen appears. Click OK.</Number>
<Number>
<A ID="pgfId-1052334"></A>
If you want to delete the forests used by the database, follow the procedure described in <A href="forests.xml#id(78933)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Deleting a Forest from a Host' on page&#160;186</A> for each forest.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038118"></A>
The database is now permanently deleted. Deleting a database is a 'hot' admin task.</EndList-root>
<Heading-2>
<A ID="pgfId-1050811"></A>
<A ID="92085"></A>
Checking and Setting Permissions for a Document in a Database</Heading-2>
<Body>
<A ID="pgfId-1050823"></A>
You can use the Admin Interface to check the permissions of a document or directory in a database. You can also use the <code>
xdmp:document-get-permissions</code>
 and <code>
xdmp:document-set-permissions</code>
 APIs to get and set permissions. For details on document permissions, see <Emphasis>
Understanding and Using Security Guide</Emphasis>
. </Body>
<Body>
<A ID="pgfId-1050834"></A>
To check and/or set permissions on a document or directory in a database using the Admin Interface, perform the following steps:</Body>
<Number1>
<A ID="pgfId-1050843"></A>
Click the Databases icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1050854"></A>
Locate the database for which you want to check or set permissions, either in the tree menu or in the Database Summary table.</Number>
<Number>
<A ID="pgfId-1050858"></A>
Click the name of the database where the document to which you want to check or set permissions is stored. The Database Configuration page appears.</Number>
<Number>
<A ID="pgfId-1050852"></A>
Click the Permissions link for the selected database in the left tree menu. The Permissions Admin page appears.</Number>
<Number>
<A ID="pgfId-1050865"></A>
Enter the URI of the document or directory and click OK.</Number>
<Number>
<A ID="pgfId-1050872"></A>
If you want to change the permissions, choose a role and capability from the drop-down lists. If you want to add more permissions, click the More Permissions button.</Number>
<Number>
<A ID="pgfId-1050873"></A>
To commit your changes, click OK. To cancel the action, press Cancel.</Number>
</NumberList>
</XML>
