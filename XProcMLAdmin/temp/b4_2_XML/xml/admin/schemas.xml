<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="schemas.css" type="text/css" charset="UTF-8"?>
<XML>
<TITLE> </TITLE><Heading-1>
<A ID="pgfId-1038002"></A>
Understanding and Defining Schemas</Heading-1>
<pagenum>
<A ID="pgfId-1038588"></A>
265</pagenum>
<Body>
<A ID="pgfId-1038003"></A>
This chapter describes schemas and lists procedures for defining them. The following topics are included:</Body>
<Body-bullet>
<A ID="pgfId-1042529"></A>
<A href="schemas.xml#id(70205)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Understanding Schemas</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1042538"></A>
<A href="schemas.xml#id(26704)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Procedures For Defining Schemas</Hyperlink>
</A></Body-bullet>
<Body>
<A ID="pgfId-1042530"></A>
For more information on the Schema database, loading schemas into MarkLogic Server, and using schemas in your applications, see the 'Loading Schemas' chapter of the <Emphasis>
Application Developer's Guide</Emphasis>
.</Body>
<Heading-2>
<A ID="pgfId-1042500"></A>
<A ID="70205"></A>
Understanding Schemas</Heading-2>
<Body>
<A ID="pgfId-1042499"></A>
A schema is a data dictionary for your XML content. To specify a schema, you need to define the namespace to which the schema applies as well as the location of the schema file.</Body>
<Body>
<A ID="pgfId-1038004"></A>
Schemas define the types of elements within XML documents. When knowing the type of an XML element would be beneficial to evaluating an XQuery program, MarkLogic Server will look for the relevant schema document (based on that element's namespace) using the following strategy:</Body>
<Number1>
<A ID="pgfId-1038005"></A>
If the XQuery program explicitly references a schema for the namespace in question, MarkLogic Server uses this reference.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038006"></A>
Otherwise, MarkLogic Server searches the schema database for an XML schema document whose target namespace is the same as the namespace of the element that MarkLogic Server is trying to type. </Number>
<Number>
<A ID="pgfId-1038007"></A>
If no matching schema document is found in the database, MarkLogic Server looks in its <code>
Config</code>
 directory for a matching schema document.</Number>
<Number>
<A ID="pgfId-1038008"></A>
If no matching schema document is found in the <code>
Config</code>
 directory, no schema is found. </Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038009"></A>
Problems can arise in step 2 above when there are multiple schema documents in the schema database whose target namespace matches the namespace of the element that MarkLogic Server is trying to type. In this case, it is convenient to be able to use the Admin Interface to specify a default mapping.</EndList-root>
<Body>
<A ID="pgfId-1038010"></A>
Schema mappings can be specified for the HTTP or XDBC servers individually or for the group to apply to all HTTP or XDBC servers in the group. If the schema mapping defined for an HTTP or XDBC server conflicts with the schema mapping defined for the group, the former mapping is used.</Body>
<Body>
<A ID="pgfId-1038011"></A>
When you specify a schema mapping in the Admin Interface, MarkLogic Server uses the following strategy to locate the schema:</Body>
<Number1>
<A ID="pgfId-1038012"></A>
First, MarkLogic Server searches the schema database for a document with the exact URI you specified in the schema mapping. </Number1>
<Note>
<A ID="pgfId-1038013"></A>
If the schema mapping for the HTTP or XDBC server conflicts with the schema mapping for the group, the former mapping is used.</Note>
<NumberList>
<Number>
<A ID="pgfId-1038014"></A>
If no matching schema document is found in the schema database, MarkLogic Server looks in its <code>
Config</code>
 directory for a schema document whose filename matches the filename portion of the URI you specified.</Number>
<Number>
<A ID="pgfId-1038015"></A>
If no matching schema document is found in the <code>
Config</code>
 directory, no schema is found.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038016"></A>
If a namespace is invoked by one or more data elements stored in a particular database, and the schema for that namespace is defined for the group or HTTP server or XDBC server, MarkLogic Server applies the schema to the storage, indexing, and retrieval of that data.</EndList-root>
<Note>
<A ID="pgfId-1038017"></A>
The schema database in this case is the schema database for the database in which the data is located.</Note>
<Heading-2>
<A ID="pgfId-1038018"></A>
<A ID="26704"></A>
Procedures For Defining Schemas</Heading-2>
<Body>
<A ID="pgfId-1042504"></A>
Use the following procedures for defining schemas:</Body>
<Body-bullet>
<A ID="pgfId-1038022"></A>
<A href="schemas.xml#id(43489)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Adding a Schema Definition for a Group</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1038026"></A>
<A href="schemas.xml#id(50081)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Adding a Schema Definition for an HTTP or XDBC Server</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1038030"></A>
<A href="schemas.xml#id(77373)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Viewing Schema Definitions for a Group</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1038037"></A>
<Hyperlink>
<A href="schemas.xml#id(14963)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">Viewing Schema Definitions for an HTTP or XDBC Server</A></Hyperlink>
</Body-bullet>
<Body-bullet>
<A ID="pgfId-1038041"></A>
<A href="schemas.xml#id(34683)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Deleting a Schema Definition for a Group</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1038045"></A>
<A href="schemas.xml#id(90933)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Deleting a Schema Definition for an HTTP or XDBC Server</Hyperlink>
</A></Body-bullet>
<Heading-3>
<A ID="pgfId-1038046"></A>
<A ID="43489"></A>
Adding a Schema Definition for a Group</Heading-3>
<Body>
<A ID="pgfId-1038047"></A>
To make a schema available to all HTTP or XDBC servers in a group, complete the following procedure:</Body>
<Number1>
<A ID="pgfId-1038048"></A>
Click the Groups icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038050"></A>
Click the group in which you want to define the schema.</Number>
<Number>
<A ID="pgfId-1038051"></A>
Click the Schemas icon on the left tree menu, under the specified group.</Number>
<Number>
<A ID="pgfId-1038052"></A>
Click the Add tab. The Schema Configuration page displays:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1038057"></A>
<IMAGE xml:link="simple" href="images/schema_add.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1038058"></A>
<A ID="51367"></A>
Enter a namespace URI and corresponding schema location.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1038059"></A>
If you are planning to store the schema in your <code>
Config</code>
 directory, the following table lists the default location of the <code>
Config</code>
 directory on each platform:</Body-indent>
<TableAnchor>
<A ID="pgfId-1038077"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1042240"></A>
Platform</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1042242"></A>
Schema Directory</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1038066"></A>
Microsoft Windows </CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1038068"></A>
<code>
C:\Program Files\MarkLogic\Config</code>
</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1038070"></A>
Red Hat Linux</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1038072"></A>
<code>
/opt/MarkLogic/Config</code>
</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1038074"></A>
Sun Solaris</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1038076"></A>
<code>
/opt/MARKlogic/Config</code>
</CellBody>
</CELL>
</ROW>
</TABLE>
<NumberList>
<Number>
<A ID="pgfId-1038079"></A>
To add more schema definitions, click the More Items button and repeat step <A href="schemas.xml#id(51367)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
5</Hyperlink>
</A> for other schemas as needed.</Number>
<Number>
<A ID="pgfId-1038080"></A>
Scroll to the top or bottom and click OK.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038081"></A>
The schema is added to the group.</EndList-root>
<Heading-3>
<A ID="pgfId-1038082"></A>
<A ID="50081"></A>
Adding a Schema Definition for an HTTP or XDBC Server</Heading-3>
<Body>
<A ID="pgfId-1038083"></A>
To make a schema available to a particular HTTP or XDBC server, perform the following steps:</Body>
<Number1>
<A ID="pgfId-1038084"></A>
Click the Groups icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038086"></A>
Click the name of the group which contains the HTTP or XDBC server to which you want to add a schema.</Number>
<Number>
<A ID="pgfId-1038087"></A>
Click the App Servers icon.</Number>
<Number>
<A ID="pgfId-1038088"></A>
Click the name of the HTTP server or XDBC server to which you want to add a schema.</Number>
<Number>
<A ID="pgfId-1038089"></A>
Click the Schemas icon on the left tree menu, under the specified HTTP or XDBC server.</Number>
<Number>
<A ID="pgfId-1038090"></A>
Click the Add tab. The Schema Configuration page displays:</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1046528"></A>
<IMAGE xml:link="simple" href="images/schema_add.gif" show="embed" actuate="auto"/>
</Body-indent>
<NumberList>
<Number>
<A ID="pgfId-1038096"></A>
<A ID="33303"></A>
Enter a namespace URI and corresponding schema location.</Number>
</NumberList>
<Body-indent>
<A ID="pgfId-1038097"></A>
If you are planning to store the schema in your config directory, refer to the following table for the default location of the config directory on your platform:</Body-indent>
<TableAnchor>
<A ID="pgfId-1042353"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1042338"></A>
Platform</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1042340"></A>
Schema Directory</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1042342"></A>
Microsoft Windows </CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1042344"></A>
<code>
C:\Program Files\MarkLogic\Config</code>
</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1042346"></A>
Red Hat Linux</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1042348"></A>
<code>
/opt/MarkLogic/Config</code>
</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1042350"></A>
Sun Solaris</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1042352"></A>
<code>
/opt/MARKlogic/Config</code>
</CellBody>
</CELL>
</ROW>
</TABLE>
<NumberList>
<Number>
<A ID="pgfId-1038117"></A>
To add more schema definitions, click the More Items button and repeat step <A href="schemas.xml#id(33303)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
7</Hyperlink>
</A> for other schemas as needed.</Number>
<Number>
<A ID="pgfId-1038118"></A>
Scroll to the top or bottom and click OK.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038119"></A>
The schema is added to the HTTP or XDBC server.</EndList-root>
<Heading-3>
<A ID="pgfId-1038120"></A>
<A ID="77373"></A>
Viewing Schema Definitions for a Group</Heading-3>
<Body>
<A ID="pgfId-1038121"></A>
To view a schema definition for a group, complete the following procedure:</Body>
<Number1>
<A ID="pgfId-1038122"></A>
Click the Groups icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038124"></A>
Click the group that contains the schema you want to view.</Number>
<Number>
<A ID="pgfId-1038125"></A>
Click the Schemas icon on the left tree menu, under the specified group.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038127"></A>
The following example shows just one schema. It specifies that the schema for namespace <code>
http://www.w3.org/1999/xhtml</code>
 is found in the file <code>
xhtml.1.xsd</code>
, which is located in the config directory of your MarkLogic Server program directory.</EndList-root>
<Body>
<A ID="pgfId-1038131"></A>
<IMAGE xml:link="simple" href="images/schema_xhtml.gif" show="embed" actuate="auto"/>
</Body>
<Heading-3>
<A ID="pgfId-1038132"></A>
<A ID="14963"></A>
Viewing Schema Definitions for an HTTP or XDBC Server</Heading-3>
<Body>
<A ID="pgfId-1038133"></A>
To view a schema definition for an HTTP or XDBC Server, perform the following steps:</Body>
<Number1>
<A ID="pgfId-1038134"></A>
Click the Groups icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038136"></A>
Click on the name of the group which contains the HTTP or XDBC server with the schema you want to view.</Number>
<Number>
<A ID="pgfId-1042418"></A>
Click the App Servers icon.</Number>
<Number>
<A ID="pgfId-1042419"></A>
Click the name of the HTTP server or XDBC server with the schema you want to view.</Number>
<Number>
<A ID="pgfId-1038139"></A>
Click the Schemas icon on the left tree menu, under the specified HTTP or XDBC server.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038141"></A>
The following example shows just one schema. It specifies that the schema for namespace <code>
http://www.w3.org/1999/xhtml</code>
 is found in the file <code>
xhtml.1.xsd</code>
, which is located in the config directory of your MarkLogic Server program directory.</EndList-root>
<Body>
<A ID="pgfId-1046546"></A>
<IMAGE xml:link="simple" href="images/schema_xhtml.gif" show="embed" actuate="auto"/>
</Body>
<Heading-3>
<A ID="pgfId-1038146"></A>
<A ID="34683"></A>
Deleting a Schema Definition for a Group</Heading-3>
<Body>
<A ID="pgfId-1038147"></A>
To delete a schema definition for a group, perform the following steps:</Body>
<Number1>
<A ID="pgfId-1038148"></A>
Click the Groups icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038150"></A>
Click the group from which you want to delete the schema.</Number>
<Number>
<A ID="pgfId-1038151"></A>
Click the Schemas icon on the left tree menu, under the specified group.</Number>
<Number>
<A ID="pgfId-1038153"></A>
Locate the schema definition to be deleted from the system and click Delete.</Number>
<Number>
<A ID="pgfId-1038154"></A>
A confirmation message displays. Confirm the delete and click OK.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038156"></A>
The schema is dropped from the group.</EndList-root>
<Heading-3>
<A ID="pgfId-1038157"></A>
<A ID="90933"></A>
Deleting a Schema Definition for an HTTP or XDBC Server</Heading-3>
<Body>
<A ID="pgfId-1038158"></A>
To delete a schema definition for an HTTP or XDBC server, perform the following steps:</Body>
<Number1>
<A ID="pgfId-1038159"></A>
Click the Groups icon on the left tree menu.</Number1>
<NumberList>
<Number>
<A ID="pgfId-1038161"></A>
Click the name of the group which contains the HTTP or XDBC server with the schema you want to delete.</Number>
<Number>
<A ID="pgfId-1042483"></A>
Click the App Servers icon.</Number>
<Number>
<A ID="pgfId-1042484"></A>
Click the name of the HTTP server or XDBC server with the schema you want to delete.</Number>
<Number>
<A ID="pgfId-1042485"></A>
Click the Schemas icon on the left tree menu, under the specified HTTP or XDBC server.</Number>
<Number>
<A ID="pgfId-1038164"></A>
Click the Schemas icon on the left tree menu, under the specified HTTP or XDBC server.</Number>
<Number>
<A ID="pgfId-1038165"></A>
Locate the schema definition to be deleted from the system and click Delete.</Number>
<Number>
<A ID="pgfId-1038166"></A>
A confirmation message displays. Confirm the delete and click OK.</Number>
</NumberList>
<EndList-root>
<A ID="pgfId-1038168"></A>
The schema is dropped from the HTTP or XDBC server.</EndList-root>
</XML>
