<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="wizard.css" type="text/css" charset="UTF-8"?>
<XML>
<TITLE> </TITLE><Heading-1>
<A ID="pgfId-1062927"></A>
<A ID="17420"></A>
Creating a Search Application With Application Builder</Heading-1>
<pagenum>
<A ID="pgfId-1062931"></A>
38</pagenum>
<Body>
<A ID="pgfId-1062932"></A>
This chapter describes how to use Application Builder to create a search application.</Body>
<Body-bullet>
<A ID="pgfId-1058371"></A>
<A href="wizard.xml#id(34058)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Starting Application Services</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064865"></A>
<A href="wizard.xml#id(71856)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Navigating Through the User Interface</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064880"></A>
<A href="wizard.xml#id(38787)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Page-By-Page Walkthrough</Hyperlink>
</A></Body-bullet>
<Heading-2>
<A ID="pgfId-1043266"></A>
<A ID="34058"></A>
Starting Application Services</Heading-2>
<Body>
<A ID="pgfId-1063025"></A>
Application Builder is bundled as part of the Application Services suite of applications. To start Application Services, open the following URL in a browser window:</Body>
<Code>
<A ID="pgfId-1063074"></A>
http://localhost:8002</Code>
<Body>
<A ID="pgfId-1063032"></A>
If your instance of MarkLogic Server is running on a different host, or if Application Services is configured on a different port, substitute the appropriate values for host and port.</Body>
<Body>
<A ID="pgfId-1067268"></A>
In order to use Application Builder, you must have the <code>
app-builder</code>
 role assigned to your login account. To use Information Studio, you must have the <code>
infostudio-user </code>
role. Users with the <code>
admin</code>
 role have access to both applications. </Body>
<Body>
<A ID="pgfId-1063129"></A>
Log in as a user with the <code>
app-builder</code>
 role (or as a user with the <code>
admin</code>
 role). For details about the <code>
app-builder</code>
 role, see <A href="security.xml#id(67890)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Predefined Roles for Application Builder' on page&#160;39</A>.</Body>
<Heading-2>
<A ID="pgfId-1063011"></A>
<A ID="71856"></A>
Navigating Through the User Interface</Heading-2>
<Body>
<A ID="pgfId-1064041"></A>
The user interface for Application Builder is a straightforward tabbed interface, where each tab allows you to configure certain functionality in the application. </Body>
<Body>
<A ID="pgfId-1064042"></A>
<IMAGE xml:link="simple" href="images/doc-tabs.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1064043"></A>
You can click on any tab to go to that page, and you can click the next and back buttons to navigate to the adjacent screens. The following table describes the navigation portions of Application Builder User Interface that appear on most of the pages.</Body>
<TableAnchor>
<A ID="pgfId-1063984"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1063927"></A>
Action</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1063929"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063931"></A>
Tabs</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063933"></A>
Click on a tab to change to display a page in Application Builder. Changing tabs will automatically save the state of the application.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="5" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063938"></A>
Application name menu</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063940"></A>
If you click on the name of the application towards the upper right corner of the screen, a menu of options displays:</CellBody>
<Body>
<A ID="pgfId-1063944"></A>
<IMAGE xml:link="simple" href="images/doc-menu.gif" show="embed" actuate="auto"/>
</Body>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063948"></A>
The Save option saves the application to the database.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063952"></A>
The Deploy Now option immediately deploys the application. This option is available only after the application has been deployed for the first time.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063956"></A>
The Support Package option generates a zip file of the application and the application (including all of the application code) in case you need to contact MarkLogic Support. The support zip file also includes a small sample of documents from your content database.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063960"></A>
The Application Configuration option displays the XML of the current application in a new window. The application XML includes the Search API options element, which is helpful if you are using Application Builder to help you generate Search API code.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063965"></A>
Home</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063967"></A>
Takes you back to the Application Services page.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063969"></A>
Help</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063971"></A>
Help for the current page.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063973"></A>
Next/Back</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063975"></A>
Navigate to the next page or back to the previous page.</CellBody>
<Body>
<A ID="pgfId-1063979"></A>
<IMAGE xml:link="simple" href="images/doc-next-back.gif" show="embed" actuate="auto"/>
</Body>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063981"></A>
Resample</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1065700"></A>
When available, samples random documents in the content database for use in building constraints, search results, and rendering the content.</CellBody>
<Note>
<A ID="pgfId-1065710"></A>
Resampling replaces many of the current settings on the page, so certain customizations you have configured will be lost after resampling.</Note>
</CELL>
</ROW>
</TABLE>
<Heading-2>
<A ID="pgfId-1063897"></A>
<A ID="38787"></A>
Page-By-Page Walkthrough</Heading-2>
<Body>
<A ID="pgfId-1064073"></A>
This section describes each page of Application Builder, and includes the following parts:</Body>
<Body-bullet>
<A ID="pgfId-1064134"></A>
<A href="wizard.xml#id(27301)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Application Builder section of the Application Services Page</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064138"></A>
<A href="wizard.xml#id(14693)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Appearance Page</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064142"></A>
<A href="wizard.xml#id(49161)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Search Page</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064438"></A>
<A href="wizard.xml#id(59956)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Sorting Page</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064146"></A>
<A href="wizard.xml#id(46445)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Results Page</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064150"></A>
<A href="wizard.xml#id(91900)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Content Page</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1064154"></A>
<A href="wizard.xml#id(30288)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Deploy Page</Hyperlink>
</A></Body-bullet>
<Heading-3>
<A ID="pgfId-1064062"></A>
<A ID="27301"></A>
Application Builder section of the Application Services Page</Heading-3>
<Body>
<A ID="pgfId-1058467"></A>
When you start Application Services or when you click the Home link in the upper right part of the other pages of Application Builder, the Application Services page opens. At the top of the Application Services page is the Application Builder Applications section.</Body>
<Body-indent>
<A ID="pgfId-1063175"></A>
<IMAGE xml:link="simple" href="images/app-build-opening-screen.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1063199"></A>
The Application Builder Applications section lists all of the applications in the <code>
App-Services</code>
 database and allows you to create a new applications, create a new sample applications (the Oscars sample application), or modify existing applications. An application stores all of the information Application Builder uses to generate an application, such as information about constraints you have configured, setting for the results page, deployment options, and so on. You can click the application name to modify an existing application as you iteratively develop a search application.</Body>
<Body>
<A ID="pgfId-1063332"></A>
When you create an application, you specify the database to use with the application (or, if you are creating a new sample application to build the Oscars sample application, you can have Application Builder create a new database for the application). You must load a representative sample of content and set up any indexes for the database outside of the scope of Application Builder. The content should be indexed and ready to be searched. Application Builder looks at the indexes configured in your database and uses that information to help you configure the application. If your database structure is still evolving, that is OK, because you can iterate. </Body>
<Note>
<A ID="pgfId-1063352"></A>
Application Builder assumes there is no fragmentation in the database. If your database is fragmented, you might need to modify the generated application for it to work properly with fragmentation. For details on modifying the generated application, see <A href="custom.xml#id(58638)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Extending Applications Built With Application Builder' on page&#160;41</A>.</Note>
<Body>
<A ID="pgfId-1063216"></A>
The following table lists the actions on the Application Builder Applications section of the Application Services page:</Body>
<TableAnchor>
<A ID="pgfId-1063230"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1063241"></A>
Action</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1063243"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063245"></A>
New Application</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063247"></A>
Creates a new application. After clicking the New Application button, enter the name of the application and choose an existing database to use for the application. </CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1066611"></A>
New Sample 
Application</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1066613"></A>
Creates a new application designed to use the Oscars sample data. After clicking the New Sample Application button, enter the name of the application and choose a database to use for the Oscars content. Choosing a new database is the normal way to create the Oscars sample application. If you choose an existing database, it should have the settings used for the Oscars database. For more details on building the Oscars Sample, see <A href="intro.xml#id(21750)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Building the Oscars Sample Application' on page&#160;9</A>.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063249"></A>
Edit</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063251"></A>
Open an existing application to modify settings and/or deploy the application.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063253"></A>
Delete</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063255"></A>
Permanently delete an application from the <code>
App-Services</code>
 database. Deletes the application, but not the database or App Server used by the application.</CellBody>
</CELL>
</ROW>
</TABLE>
<Heading-3>
<A ID="pgfId-1063176"></A>
<A ID="14693"></A>
Appearance Page</Heading-3>
<Body>
<A ID="pgfId-1043276"></A>
The Appearance page is where you can configure some look-and-feel aspects of your application. For example, you can specify a title, add a logo, and add custom CSS code. Default values are supplied for all of the options, so you can simply take the defaults if they suit your application.</Body>
<Body-indent>
<A ID="pgfId-1063430"></A>
<IMAGE xml:link="simple" href="images/appear.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1063462"></A>
The following table lists the actions on the Appearance page:</Body>
<TableAnchor>
<A ID="pgfId-1063796"></A>
</TableAnchor>
<TABLE>
<ROW>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1063739"></A>
Action</CellHeading>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<CellHeading>
<A ID="pgfId-1063741"></A>
Description</CellHeading>
</TH>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063785"></A>
Logo Type</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063787"></A>
Select an image and a URL for the image, or enter text in place of the logo. This becomes the title or logo of your application on the main page.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063789"></A>
Skin</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063791"></A>
Affects the look and feel of the application. Select one of the available skins, and by clicking the Customize button, you can enter arbitrary CSS that the application uses in addition to the selected skin CSS.</CellBody>
</CELL>
</ROW>
<ROW>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063793"></A>
Site Info</CellBody>
</CELL>
<CELL ROWSPAN="1" COLSPAN="1">
<CellBody>
<A ID="pgfId-1063795"></A>
Metadata about the site. The page title appears in the top bar of the browser window for the application (the <code>
html/head/title</code>
 element), and the copyright information appears in the footer.</CellBody>
</CELL>
</ROW>
</TABLE>
<Heading-3>
<A ID="pgfId-1062825"></A>
<A ID="49161"></A>
Search Page</Heading-3>
<Body>
<A ID="pgfId-1063857"></A>
The Search page is where you configure constraints and facets for your application. The facets in the application allow you to drill-down on your result set, narrowing the search to a given category.</Body>
<Body-indent>
<A ID="pgfId-1064165"></A>
<IMAGE xml:link="simple" href="images/search-constraints.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1064172"></A>
You can configure existing constraints or add new constraints on the Search page. You can use Range and Collection constraints to create facets, and all constraints can be used as query text with the constraint name and value. For example the following query text in the generated Oscars sample application returns all awards that are from the 1980s:</Body>
<Code>
<A ID="pgfId-1065182"></A>
decade:1980s</Code>
<Body>
<A ID="pgfId-1065193"></A>
There are several kinds of constraints you can add or modify on the Search page. The following parts describe those constraints as well as modifying other options to search in the application:</Body>
<Body-bullet>
<A ID="pgfId-1065139"></A>
<A href="wizard.xml#id(12434)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Add/Modify Range Constraints</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1065149"></A>
<A href="wizard.xml#id(90394)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Add/Modify Value Constraints</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1065156"></A>
<A href="wizard.xml#id(37582)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Add/Modify Word Constraint</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1065163"></A>
<A href="wizard.xml#id(47922)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Add/Modify Collection Constraint</Hyperlink>
</A></Body-bullet>
<Body-bullet>
<A ID="pgfId-1065391"></A>
<A href="wizard.xml#id(61168)" xml:link="simple" show="replace" actuate="user" CLASS="XRef"><Hyperlink>
Modifying Search Options</Hyperlink>
</A></Body-bullet>
<Heading-4>
<A ID="pgfId-1065117"></A>
<A ID="12434"></A>
Add/Modify Range Constraints</Heading-4>
<Body>
<A ID="pgfId-1065175"></A>
A range constraint uses range indexes to support queries and create facets. Click the Add New button to add a new constraint, or click the options link to edit an existing constraint.</Body>
<Body-indent>
<A ID="pgfId-1065121"></A>
<IMAGE xml:link="simple" href="images/doc-add-range.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1065022"></A>
Range constraints can be faceted, and can be used in queries with query text like the following:</Body>
<Code>
<A ID="pgfId-1065776"></A>
decade:1980s</Code>
<Body>
<A ID="pgfId-1065765"></A>
There are two types of Range constraints: Exact Match and Fixed Buckets. Additionally, for date ranges, there is a third type of Range constraint: Relative Buckets.</Body>
<Body>
<A ID="pgfId-1065207"></A>
Exact match Range constraints match on each individual value of the specified Range index. Exact match constraints are useful if you want every value to have significance in constraints and facets. </Body>
<Body>
<A ID="pgfId-1064192"></A>
<IMAGE xml:link="simple" href="images/doc-exact-match.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1064208"></A>
Fixed buckets constraints allow you to specify labels that correspond to ranges of values. Fixed buckets are useful when you want to specify ranges of values (decades on time-based ranges, for example) for queries and facets.</Body>
<Body>
<A ID="pgfId-1064222"></A>
<IMAGE xml:link="simple" href="images/doc-fixed-bucket.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1064215"></A>
Relative buckets constraints are used with date ranges (that is, elements or attributes of type <code>
xs:date</code>
 or <code>
xs:dateTime</code>
). You can create constraints that are for various ranges of dates. To create a new bucket that represents a range of dates, fill in the items in the form and click the Add Bucket button. A new row is added to the bucket table with the range you specified.</Body>
<Body>
<A ID="pgfId-1066806"></A>
You can also modify existing buckets by editing the fields in the table that lists the buckets. The Anchor field in the relative buckets configuration screen specifies what part of the date or dateTime value to start counting where the bucket boundaries are. The On or After and the Before fields in the relative buckets table must be represented as durations. Durations are used to specify time periods, and it is possible to do arithmetic on durations. For some information about the syntax of durations, see <Hyperlink>
<A href="http://en.wikipedia.org/wiki/ISO_8601#Durations" xml:link="simple" show="replace" actuate="user" CLASS="URL">http://en.wikipedia.org/wiki/ISO_8601#Durations</A></Hyperlink>
 or see the appropriate section of the XML Schema specification (<Hyperlink>
<A href="http://www.w3.org/TR/2001/REC-xmlschema-2-20010502/#isoformats" xml:link="simple" show="replace" actuate="user" CLASS="URL">http://www.w3.org/TR/2001/REC-xmlschema-2-20010502/#isoformats</A></Hyperlink>
). For example, a duration of <code>
P0D</code>
 means zero days from the specified value, a duration of <code>
P1D</code>
 means one day after the specified value, and a duration of <code>
-P1D</code>
 means one day before the specified value. Similarly, a duration of <code>
P1Y</code>
 means one year later, a duration of <code>
-P3M</code>
 means three months earlier, and a duration of <code>
P10H</code>
 means ten hours later.</Body>
<Body>
<A ID="pgfId-1066694"></A>
<IMAGE xml:link="simple" href="images/doc-relative-buckets.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1066669"></A>
Each range constraint, if faceted, also has Facet Settings, which control things like how many facets appear in the results.</Body>
<Body>
<A ID="pgfId-1064238"></A>
<IMAGE xml:link="simple" href="images/doc-facet-settings.gif" show="embed" actuate="auto"/>
</Body>
<Heading-4>
<A ID="pgfId-1064272"></A>
<A ID="90394"></A>
Add/Modify Value Constraints</Heading-4>
<Body>
<A ID="pgfId-1065279"></A>
A value constraint uses element or attribute values to create a constraint. Click the Add New button to add a new constraint, or click the options link to edit an existing constraint. On the New Constraint page, enter a name for the constraint and enter an element or attribute name to match on. When you click the Find button, Application Builder searches through sample documents in your database to find wildcard-matching elements or attributes.</Body>
<Body-indent>
<A ID="pgfId-1065283"></A>
<IMAGE xml:link="simple" href="images/doc-add-value.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1065850"></A>
Value constraints differ from range constraints in the following ways:</Body>
<Body-bullet>
<A ID="pgfId-1065872"></A>
You do not need a range indexes for value constraints, you need range indexes for range constraints.</Body-bullet>
<Body-bullet>
<A ID="pgfId-1065882"></A>
You cannot create facets from value constraints, you can facet range constraints. </Body-bullet>
<Body-bullet>
<A ID="pgfId-1065891"></A>
Value constraints are text queries, range constraints are type-aware matches. </Body-bullet>
<Body>
<A ID="pgfId-1065823"></A>
Value constraints match when the text you search for matches the element or attribute value. For example, the following value constraint query text matches the element <code>
&lt;author&gt;Raymond&#160;Carver&lt;/author&gt;</code>
, assuming it is set up to be case-insensitive (which is the default).</Body>
<Code>
<A ID="pgfId-1065908"></A>
author:&quot;raymond carver&quot;</Code>
<Heading-4>
<A ID="pgfId-1064295"></A>
<A ID="37582"></A>
Add/Modify Word Constraint</Heading-4>
<Body>
<A ID="pgfId-1065262"></A>
A word constraint uses elements, attributes, or fields to find words. When the constraint is used, it matches documents with the word specified in the constraint. For example, if you have create a word constraint on the <code>
ABSTRACT</code>
 element, the following search would find documents with the word hello in an <code>
ABSTRACT</code>
 element:</Body>
<Code>
<A ID="pgfId-1065329"></A>
abstract:hello</Code>
<Body>
<A ID="pgfId-1065336"></A>
Click the Add New button to add a new constraint, or click the options link to edit an existing constraint.</Body>
<Body-indent>
<A ID="pgfId-1064302"></A>
<IMAGE xml:link="simple" href="images/doc-add-word.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1065934"></A>
Word constraints cannot be faceted. No special indexes are required for a word constraint, although if you specify an element, attribute, or field that does not exist, queries using the constraint will return no results.</Body>
<Heading-4>
<A ID="pgfId-1064309"></A>
<A ID="47922"></A>
Add/Modify Collection Constraint</Heading-4>
<Body>
<A ID="pgfId-1065272"></A>
A collection constraint constrains a search to items in the specified collection and allows facets on the collection. Click the Add New button to add a new constraint, or click the options link to edit an existing constraint.</Body>
<Body-indent>
<A ID="pgfId-1064323"></A>
<IMAGE xml:link="simple" href="images/doc-add-collection.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1065948"></A>
A Collection constraint requires that the collection lexicon is enabled in the database. and you can create facets with a collection constraint.</Body>
<Body>
<A ID="pgfId-1065968"></A>
You can optionally set up a prefix that is used to concatenate with the collection constraint value by clicking the Options link for the constraint and setting a prefix. </Body>
<Body-indent>
<A ID="pgfId-1065975"></A>
<IMAGE xml:link="simple" href="images/doc-collection-prefix.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1065999"></A>
Assuming that all documents in your database have collection URIs that begin with the string <code>
/my-collections/</code>
 like the following:</Body>
<Code>
<A ID="pgfId-1066000"></A>
<code>
/my-collections/</code>
math
<code>
/my-collections/</code>
economics
<code>
/my-collections/</code>
zoology</Code>
<Body>
<A ID="pgfId-1066001"></A>
Then the following query text examples will match documents in the corresponding collections:</Body>
<Code>
<A ID="pgfId-1066002"></A>
subject:math
subject:economics
subject:zoology</Code>
<Body>
<A ID="pgfId-1066027"></A>
You can check the Faceted button to create facets on the collections.</Body>
<Heading-4>
<A ID="pgfId-1064330"></A>
<A ID="61168"></A>
Modifying Search Options</Heading-4>
<Body>
<A ID="pgfId-1065358"></A>
For word and value constraints, you can modify the search options (case sensitive/insensitive, diacritic sensitive/insensitive, and so on) by clicking the options link for the constraint. By default, most of the options are set to the MarkLogic Server defaults. For details on the MarkLogic Server defaults for query behavior, see the documentation for the individual cts:query constructors in the <Emphasis>
XQuery Built-In and Module API Documentation</Emphasis>
.</Body>
<Body-indent>
<A ID="pgfId-1064372"></A>
<IMAGE xml:link="simple" href="images/doc-word-options.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1065033"></A>
Additionally, the Advanced settings button displays a page allowing you to modify the search grammar and search options (case sensitive/insensitive, diacritic sensitive/insensitive, and so on) for everything besides the constraints in your application (some constraints allow you to set their search options independently). By default, many of the options are set to the Search API and MarkLogic Server defaults. For details on the various search options in MarkLogic Server, see the <Emphasis>
Search Developer's Guide</Emphasis>
.</Body>
<Body-indent>
<A ID="pgfId-1065069"></A>
<IMAGE xml:link="simple" href="images/doc-search-options.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1066043"></A>
The Filter results button specifies whether the searches should be run unfiltered (option unchecked) or filtered. Filtered searches are more accurate in some cases, and unfiltered searches are always faster.</Body>
<Heading-3>
<A ID="pgfId-1062974"></A>
<A ID="59956"></A>
Sorting Page</Heading-3>
<Body>
<A ID="pgfId-1064431"></A>
Use the sorting page to create different sorting operators for your application. By default, searches sort in relevance order (ordered by score). The sorting page allows you to configure other operators for different sorting orders.</Body>
<Body-indent>
<A ID="pgfId-1064456"></A>
<IMAGE xml:link="simple" href="images/sorting.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1066059"></A>
In the application that is generated, you can use the name of the sorting criteria with sort operator to specify the order of your results. For example, the following specifies sorting by year:</Body>
<Code>
<A ID="pgfId-1066060"></A>
sort:year</Code>
<Body>
<A ID="pgfId-1064518"></A>
To create different sort orders, you need range indexes on the keys on which you want to sort. Each line in the sort table represents a sort operator, and the green rounded controls represent a key on which to sort. Click the Add button to add a new sort key to an existing sort operator. The new field is placed after any existing sort keys. To remove a key, click the X in the key. To remove the whole sort operator, click the X at the right of the row.</Body>
<Body>
<A ID="pgfId-1064519"></A>
<IMAGE xml:link="simple" href="images/doc-sort-chicklet.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1064520"></A>
By adding new keys or deleting existing ones, you can specify a custom sort order. You can edit the source index or sort order of an existing key by clicking it.</Body>
<Body>
<A ID="pgfId-1064543"></A>
<IMAGE xml:link="simple" href="images/doc-sort-edit.gif" show="embed" actuate="auto"/>
</Body>
<Heading-3>
<A ID="pgfId-1064424"></A>
<A ID="46445"></A>
Results Page</Heading-3>
<Body>
<A ID="pgfId-1064413"></A>
Use the Results page to configure individual search results, including the title, the snippet, and the metadata you want to show. </Body>
<Body-indent>
<A ID="pgfId-1064561"></A>
<IMAGE xml:link="simple" href="images/results-page.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1065509"></A>
As you make changes, the changes appear in the preview area. Not all changes will appear, depending on which pieces of content Application Builder has sampled. For example, if you change a preferred element, depending on the content in the sample documents, there might not be a match in those elements and the snippet shown in the preview would therefore not change. To test the snippetting, it is best to test it on the deployed application with different searches and with a more robust sampling of content in your database.</Body>
<Body>
<A ID="pgfId-1065513"></A>
The title is a link to the result content. You can add parts of the content from elements or attributes and literal text, and you can concatenate them together in any order. When you add a new item, it displays to the right of any existing items. To delete an item, click the X button corresponding to the item.</Body>
<Body>
<A ID="pgfId-1064687"></A>
<IMAGE xml:link="simple" href="images/docs-result-title.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1064703"></A>
When you add literal text, if you want a space to appear at the beginning of the item, add a space at the beginning.</Body>
<Body>
<A ID="pgfId-1066086"></A>
<IMAGE xml:link="simple" href="images/doc-text-item.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1066075"></A>
You can configure snippets by adding one or more elements that the snippetting algorithm will favor. It uses these to try and choose the best parts of the document to show in the snippets, based on the elements you specified as preferred.</Body>
<Body>
<A ID="pgfId-1064623"></A>
<IMAGE xml:link="simple" href="images/doc-snippet.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1064642"></A>
The metadata displays below the snippet, and you configure it the same way as the title.</Body>
<Body>
<A ID="pgfId-1064658"></A>
<IMAGE xml:link="simple" href="images/docs-metadata.gif" show="embed" actuate="auto"/>
</Body>
<Heading-3>
<A ID="pgfId-1062981"></A>
<A ID="91900"></A>
Content Page</Heading-3>
<Body>
<A ID="pgfId-1064121"></A>
The content page allows you to control the rendering of the search content. This controls how the content is rendered to xhtml in the generated application. Application Builder looks at the content and divides it up into <Emphasis>
container element</Emphasis>
 (elements that have children) and <Emphasis>
simple elements</Emphasis>
 (elements with no children). You can choose None (no rendering), Div, Span, or Para for each container element, and None (no rendering), Div, Span, Header1, Header2, Para, Strong, and Emphasis for each simple element. </Body>
<Body>
<A ID="pgfId-1064714"></A>
<IMAGE xml:link="simple" href="images/conten-page.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1064734"></A>
The rendering choices appear in the live preview window. If you click on a part of the preview, a menu appears allowing you to change the rendering for that element.</Body>
<Body-indent>
<A ID="pgfId-1064770"></A>
<IMAGE xml:link="simple" href="images/doc-render-as.gif" show="embed" actuate="auto"/>
</Body-indent>
<Body>
<A ID="pgfId-1065521"></A>
If the XHTML passthru box is checked, then any content in the XHTML namespace (<code>
http://www.w3.org/1999/xhtml</code>
) is passed through without change to the displayed application.</Body>
<Body>
<A ID="pgfId-1067013"></A>
Selecting the Custom XSLT tab displays the XSL stylesheet used to render the content page. Here you can make more detailed modifications to the XSL.</Body>
<Body>
<A ID="pgfId-1067055"></A>
<IMAGE xml:link="simple" href="images/custom-xslt.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1067071"></A>
Click the Preview tab to preview the results of your changes to the XSL stylesheet. When you are satisfied with the results, click Edit to return to the XSL stylesheet and click Save. If you navigate away from the Custom XSLT pages without first saving your changes, they will be lost.</Body>
<Body>
<A ID="pgfId-1067035"></A>
<IMAGE xml:link="simple" href="images/custom-xslt-preview.gif" show="embed" actuate="auto"/>
</Body>
<Body>
<A ID="pgfId-1067126"></A>
If you want to further customize the rendering, you can customize the application after it is built, by means of the XSL files in the <code>
/application/custom</code>
 directory, as described in <A href="custom.xml#id(58638)" xml:link="simple" show="replace" actuate="user" CLASS="XRef">'Extending Applications Built With Application Builder' on page&#160;41</A>.</Body>
<Heading-3>
<A ID="pgfId-1062988"></A>
<A ID="30288"></A>
Deploy Page</Heading-3>
<Body>
<A ID="pgfId-1062942"></A>
The deploy page is where you select or configure the App Server on MarkLogic Server to which your generated application will deploy. When you click the Deploy button, Application Builder performs the following actions:</Body>
<Body-bullet>
<A ID="pgfId-1066121"></A>
It compiles the application based on the application settings.</Body-bullet>
<Body-bullet>
<A ID="pgfId-1066142"></A>
It deploys the compiled application code to the modules database of the specified App Server.</Body-bullet>
<Body-bullet>
<A ID="pgfId-1066151"></A>
It launches the newly compiled application.</Body-bullet>
<Body>
<A ID="pgfId-1065445"></A>
If you use an existing App Server, it must be configured to use a modules database with a root of <code>
/application/</code>
; Application Builder will not deploy code to an App Server with any other root or with its root on the filesystem. </Body>
<Body>
<A ID="pgfId-1066163"></A>
If you create a new App Server, Application Builder will also create a modules database for the new App Server, and it will configure it with a root of <code>
/application/</code>
. </Body>
<Body-indent>
<A ID="pgfId-1064793"></A>
<IMAGE xml:link="simple" href="images/compile-deploy.gif" show="embed" actuate="auto"/>
</Body-indent>
<Note>
<A ID="pgfId-1064847"></A>
When you deploy an application, it opens the newly generated application in a new browser window using a URL with the hostname that is stored in the MarkLogic Server configuration files (the result of an <code>
xdmp:host-name</code>
 call). If you are running on a laptop computer that is changing networks, it is possible that the hostname will not be available on your network, resulting in a 404 or similar error when the application launches (because it is trying to access a server name that is not available on your current network). In these cases, substituting <code>
localhost</code>
 for the hostname in the URL should allow the application to launch.</Note>
</XML>
